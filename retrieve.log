2024-11-06 15:45:11:DEBUG:jieba:Building prefix dict from /home/s1136102/python/AICUP/custom_dicts/dict.txt.big ...
2024-11-06 15:45:11:DEBUG:jieba:Loading model from cache /tmp/jieba.ua6683cd5b6b7d5b3ab16049ce5b543c6.cache
2024-11-06 15:45:12:DEBUG:jieba:Loading model cost 1.177 seconds.
2024-11-06 15:45:12:DEBUG:jieba:Prefix dict has been built successfully.
2024-11-06 15:45:12:INFO:__main__:載入自定義字典: ./custom_dicts/with_frequency/common_use_dict_with_frequency.txt
2024-11-06 15:45:12:INFO:__main__:載入自定義字典: ./custom_dicts/with_frequency/insurance_dict_with_frequency.txt
2024-11-06 15:45:12:INFO:__main__:Loading stopwords success
2024-11-06 15:45:12:INFO:__main__:stopwords: {'其', ')', '#', '／', '%', '（', '一直', '「', '至', '後來', '併', '︰', '1', ':', '〃', '則', '公司', '．', '中', '現在', '】', '什麼', '請', '新', '～', '怎麼', '不', '在', '邊', '她', '喔', '所以', '以及', '但是', '並', '本', '＄', '，', '因而', '哦', '•', '﹑', '時', '需要', ',', '如', '呢', '與', '或', '外', '吧', '於', '」', '保險', '以', '嗎', '!', '比如', '然而', '以前', '使', '因此', '人', '`', '二季', '等', '對', '的', '他', '並且', '係', '他們', '％', '如果', '&', '﹒', '也', '如何', '。', '已', '|', '[', '3', '.', '"', '下', '~', '客戶', '左', ';', '、', '即使', '右', '期', '(', '4', '/', '{', '你', '若', '啊', '-', '–', '}', '後', '頁', '有', '附', '三季', '－', '被', '內', '剛才', '得', '第', '?', '未', '它', '＿', '一季', '關', '依', '將', '為', '註', ']', '且', '$', '！', '和', '你們', '上', "'", '【', '年', '需', '但', '從前', '2', '我', '應', '前', '哇', '是', '_', '可', '？', '經常', '有限公司', '：', '由', '因', '開始', '又', '\\', '裡', '最近', '約', '呀', '及', '應該', '同時', '雖然', '產品', '比如說', '因為', '之', '著', '而', '）', '該', '我們', '；', '項', '了'}
2024-11-06 15:45:12:INFO:gensim.utils:loading KeyedVectors object from /home/s1136102/python/AICUP/./word2vec/wiki.zh.bin
2024-11-06 15:45:12:INFO:gensim.utils:loading vectors from /home/s1136102/python/AICUP/./word2vec/wiki.zh.bin.vectors.npy with mmap=None
2024-11-06 15:45:12:INFO:gensim.utils:KeyedVectors lifecycle event {'fname': '/home/s1136102/python/AICUP/./word2vec/wiki.zh.bin', 'datetime': '2024-11-06T15:45:12.949432', 'gensim': '4.3.3', 'python': '3.9.12 (main, Jun  1 2022, 11:38:51) \n[GCC 7.5.0]', 'platform': 'Linux-5.4.0-150-generic-x86_64-with-glibc2.27', 'event': 'loaded'}
2024-11-06 15:45:12:INFO:__main__:Word2Vec model loaded successfully
2024-11-06 15:45:15:INFO:datasets:PyTorch version 2.4.0+cu121 available.
2024-11-06 15:45:15:INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: BAAI/bge-m3
2024-11-06 15:45:21:INFO:__main__:BM25_K1: 0.5
2024-11-06 15:45:21:INFO:__main__:BM25_B: 0.7
2024-11-06 15:45:21:INFO:__main__:================================================================= QID: 1 =================================================================
2024-11-06 15:45:21:INFO:__main__:query分詞結果: 匯款/誰/負擔/中間/銀/相關/行/費用/收取/所/中間行
2024-11-06 15:45:21:INFO:__main__:query擴展詞: 
2024-11-06 15:45:22:INFO:__main__:BM25 Rank 1: PDF 392, Chunk 2, Score: 19.1684, Term Importance: 0.9913, Semantic Similarity: 0.9950, Query Coverage: 1.7219, Position Score: 0.0618, Term Density: 1.6515, Context Similarity: 12.5229, Frequency: [('相關', 5), ('匯款', 4), ('費用', 4), ('負擔', 4), ('行', 3), ('銀', 2), ('所', 2), ('收取', 2), ('中間', 1)]
2024-11-06 15:45:22:INFO:__main__:BM25 Rank 2: PDF 392, Chunk 3, Score: 11.4911, Term Importance: 4.0655, Semantic Similarity: 0.9956, Query Coverage: 0.9765, Position Score: 0.0293, Term Density: 1.1147, Context Similarity: 18.3803, Frequency: [('匯款', 7), ('行', 7), ('相關', 6), ('銀', 6), ('費用', 4), ('負擔', 1)]
2024-11-06 15:45:22:INFO:__main__:BM25 Rank 3: PDF 440, Chunk 1, Score: 3.6740, Term Importance: 0.1823, Semantic Similarity: 0.9917, Query Coverage: 0.3753, Position Score: 0.0141, Term Density: 0.2064, Context Similarity: 8.8727, Frequency: [('相關', 2), ('費用', 2), ('負擔', 2)]
2024-11-06 15:45:22:INFO:__main__:BM25 Rank 4: PDF 440, Chunk 2, Score: 3.5702, Term Importance: 0.1827, Semantic Similarity: 0.9906, Query Coverage: 0.3753, Position Score: 0.3027, Term Density: 0.2064, Context Similarity: 4.7658, Frequency: [('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-06 15:45:22:INFO:__main__:BM25 Rank 5: PDF 196, Chunk 1, Score: 3.5371, Term Importance: 0.0910, Semantic Similarity: 0.9914, Query Coverage: 0.4724, Position Score: 0.0224, Term Density: 0.2064, Context Similarity: 3.6214, Frequency: [('行', 1), ('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-06 15:45:23:INFO:faiss.loader:Loading faiss with AVX2 support.
2024-11-06 15:45:23:INFO:faiss.loader:Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2024-11-06 15:45:23:INFO:faiss.loader:Loading faiss.
2024-11-06 15:45:23:INFO:faiss.loader:Successfully loaded faiss.
2024-11-06 15:45:23:INFO:__main__:----------------------------------------------------------------------------------------------------
2024-11-06 15:45:23:INFO:__main__:FAISS Score: [0.9001], PDF: 392, Chunk: 3, metadata: [{}]
2024-11-06 15:45:23:INFO:__main__:FAISS Score: [0.9216], PDF: 392, Chunk: 2, metadata: [{}]
2024-11-06 15:45:23:INFO:__main__:FAISS Score: [1.0615], PDF: 440, Chunk: 2, metadata: [{}]
2024-11-06 15:45:23:INFO:__main__:FAISS Score: [1.0930], PDF: 442, Chunk: 4, metadata: [{}]
2024-11-06 15:45:23:INFO:__main__:FAISS Score: [1.0931], PDF: 14, Chunk: 1, metadata: [{}]
2024-11-06 15:45:23:INFO:__main__:----------------------------------------------------------------------------------------------------
2024-11-06 15:45:23:INFO:__main__:Final Rankings (Adaptive Weights):
2024-11-06 15:45:23:INFO:__main__:Query Features - Length: 11, Diversity: 0.92
2024-11-06 15:45:23:INFO:__main__:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.09615384615384616, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.04807692307692308, 'context': 0.04807692307692308}
2024-11-06 15:45:23:INFO:__main__:PDF 392, Chunk 2: Final Score=0.7849, BM25=1.0000, FAISS=0.8889, Importance=0.2265, Semantic=0.8785, Coverage=1.0000, Position=0.1653, Density=1.0000, Context=0.6031
2024-11-06 15:45:23:INFO:__main__:PDF 392, Chunk 3: Final Score=0.7138, BM25=0.5089, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=0.4464, Position=0.0527, Density=0.6285, Context=1.0000
2024-11-06 15:45:23:INFO:__main__:PDF 440, Chunk 2: Final Score=0.1498, BM25=0.0021, FAISS=0.1636, Importance=0.0231, Semantic=0.0000, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0775
2024-11-06 15:45:23:INFO:__main__:PDF 440, Chunk 1: Final Score=0.0372, BM25=0.0088, FAISS=0.0000, Importance=0.0230, Semantic=0.2058, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.3558
2024-11-06 15:45:23:INFO:__main__:PDF 196, Chunk 1: Final Score=0.0228, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.1523, Coverage=0.0721, Position=0.0290, Density=0.0000, Context=0.0000
2024-11-06 15:45:23:INFO:__main__:PDF 442, Chunk 4: Final Score=0.0001, BM25=0.0000, FAISS=0.0005, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-06 15:45:23:INFO:__main__:PDF 14, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-06 15:45:23:INFO:__main__:================================================================= QID: 2 =================================================================
