2024-11-08 11:47:34:DEBUG:jieba:Building prefix dict from /home/s1136102/python/AICUP/custom_dicts/dict.txt.big ...
2024-11-08 11:47:34:DEBUG:jieba:Loading model from cache /tmp/jieba.ua6683cd5b6b7d5b3ab16049ce5b543c6.cache
2024-11-08 11:47:35:DEBUG:jieba:Loading model cost 1.179 seconds.
2024-11-08 11:47:35:DEBUG:jieba:Prefix dict has been built successfully.
2024-11-08 11:47:35:INFO:__main__:載入自定義字典: ./custom_dicts/with_frequency/common_use_dict_with_frequency.txt
2024-11-08 11:47:35:INFO:__main__:載入自定義字典: ./custom_dicts/with_frequency/insurance_dict_with_frequency.txt
2024-11-08 11:47:35:INFO:utils.text_processor.resource_loader:Loading stopwords success
2024-11-08 11:47:35:INFO:utils.text_processor.resource_loader:stopwords: {'所以', '(', '嗎', '本', '什麼', '％', '〃', '需', '二季', '!', '裡', '怎麼', '如果', '%', '以及', '產品', '若', '_', '、', '﹑', ')', '：', '】', '並', '請', '1', '上', '被', '＄', '&', '﹒', '依', '它', '|', '後', '開始', '我', '3', '我們', '一季', '和', '，', '經常', '–', '需要', '於', '以前', '啊', '！', '得', '人', '即使', '~', '由', '最近', '～', '與', '後來', '使', '她', '＿', '而', '但是', '左', '同時', '因為', '保險', '）', '且', '中', '.', '／', '比如說', '三季', '呀', '一直', '第', '但', ',', '`', '其', '時', '註', '4', '約', '從前', '︰', '應該', '•', '-', '剛才', '$', '以', '你', '關', '有限公司', '未', '下', '"', '將', '因而', '新', '年', '項', '如', '之', '該', '已', '並且', '期', ';', '對', '或', '你們', '哦', '－', '等', '【', '然而', '？', '\\', '外', '邊', '{', '}', '現在', '如何', '」', '附', '頁', '「', '比如', '．', '。', '可', '吧', '不', '雖然', '因此', '在', '也', '應', '又', '右', '哇', '了', '公司', '有', '因', '係', '為', '的', '是', '前', '呢', '客戶', ']', '?', '2', "'", '內', ':', '喔', '則', '著', '他們', '/', '#', '併', '至', '（', '及', '；', '他', '['}
2024-11-08 11:47:35:INFO:gensim.utils:loading KeyedVectors object from /home/s1136102/python/AICUP/utils/../word2vec/wiki.zh.bin
2024-11-08 11:47:35:INFO:gensim.utils:loading vectors from /home/s1136102/python/AICUP/utils/../word2vec/wiki.zh.bin.vectors.npy with mmap=None
2024-11-08 11:47:35:INFO:gensim.utils:KeyedVectors lifecycle event {'fname': '/home/s1136102/python/AICUP/utils/../word2vec/wiki.zh.bin', 'datetime': '2024-11-08T11:47:35.794562', 'gensim': '4.3.3', 'python': '3.9.12 (main, Jun  1 2022, 11:38:51) \n[GCC 7.5.0]', 'platform': 'Linux-5.4.0-150-generic-x86_64-with-glibc2.27', 'event': 'loaded'}
2024-11-08 11:47:35:INFO:utils.text_processor.resource_loader:Word2Vec model loaded successfully
2024-11-08 11:47:38:INFO:datasets:PyTorch version 2.4.0+cu121 available.
2024-11-08 11:47:38:INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: BAAI/bge-m3
2024-11-08 11:47:43:INFO:__main__:Config:
{
  "stopwords_filepath": "./custom_dicts/stopwords.txt",
  "embedding_model_name": "BAAI/bge-m3",
  "bm25_k1": 0.5,
  "bm25_b": 0.7,
  "bm25_epsilon": 0.5,
  "use_expansion": false,
  "expansion_model_path": "../word2vec/wiki.zh.bin",
  "expanded_topn": 2,
  "chunk_size": 500,
  "overlap": 100,
  "use_faiss": true,
  "use_term_importance": true,
  "use_semantic_search": true,
  "use_term_density": true,
  "use_query_coverage": true,
  "use_position_score": true,
  "use_context_similarity": true
}
2024-11-08 11:47:43:INFO:__main__:================================================================= QID: 1 =================================================================
2024-11-08 11:47:44:INFO:utils.text_processor.query_processor:query分詞結果: 中間/費用/收取/誰/匯款/中間行/所/負擔/行/銀/相關
2024-11-08 11:47:44:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:44:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 392, Chunk 2, Score: 19.9930, Term Importance: 1.0218, Semantic Similarity: 0.9950, Query Coverage: 1.7824, Position Score: 0.0641, Term Density: 1.7002, Context Similarity: 13.1619, Frequency: [('匯款', 5), ('相關', 5), ('費用', 4), ('負擔', 4), ('行', 3), ('銀', 2), ('所', 2), ('收取', 2), ('中間', 1)]
2024-11-08 11:47:44:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 392, Chunk 3, Score: 12.4754, Term Importance: 4.5753, Semantic Similarity: 0.9953, Query Coverage: 1.0262, Position Score: 0.0298, Term Density: 1.1404, Context Similarity: 19.6871, Frequency: [('相關', 7), ('匯款', 7), ('行', 7), ('銀', 6), ('費用', 4), ('負擔', 1)]
2024-11-08 11:47:44:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 440, Chunk 1, Score: 4.3453, Term Importance: 0.2156, Semantic Similarity: 0.9907, Query Coverage: 0.4164, Position Score: 0.0144, Term Density: 0.2290, Context Similarity: 9.0412, Frequency: [('相關', 2), ('費用', 2), ('負擔', 2)]
2024-11-08 11:47:44:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 196, Chunk 1, Score: 4.2831, Term Importance: 0.1168, Semantic Similarity: 0.9914, Query Coverage: 0.5221, Position Score: 0.0220, Term Density: 0.2290, Context Similarity: 3.6214, Frequency: [('行', 1), ('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-08 11:47:44:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 442, Chunk 2, Score: 4.0981, Term Importance: 0.0421, Semantic Similarity: 0.9918, Query Coverage: 0.4164, Position Score: 0.2495, Term Density: 0.2290, Context Similarity: 4.3170, Frequency: [('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-08 11:47:46:INFO:faiss.loader:Loading faiss with AVX2 support.
2024-11-08 11:47:46:INFO:faiss.loader:Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2024-11-08 11:47:46:INFO:faiss.loader:Loading faiss.
2024-11-08 11:47:46:INFO:faiss.loader:Successfully loaded faiss.
2024-11-08 11:47:46:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:46:INFO:utils.RAGProcessor:FAISS Score: [0.8987], PDF: 392, Chunk: 2, metadata: [{}]
2024-11-08 11:47:46:INFO:utils.RAGProcessor:FAISS Score: [0.9015], PDF: 392, Chunk: 3, metadata: [{}]
2024-11-08 11:47:46:INFO:utils.RAGProcessor:FAISS Score: [1.0101], PDF: 440, Chunk: 2, metadata: [{}]
2024-11-08 11:47:46:INFO:utils.RAGProcessor:FAISS Score: [1.0735], PDF: 431, Chunk: 1, metadata: [{}]
2024-11-08 11:47:46:INFO:utils.RAGProcessor:FAISS Score: [1.0793], PDF: 51, Chunk: 2, metadata: [{}]
2024-11-08 11:47:46:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 392, Chunk 2: Final Score=0.9002, BM25=1.0000, FAISS=1.0000, Importance=0.2161, Semantic=0.9425, Coverage=1.0000, Position=0.2115, Density=1.0000, Context=0.5938
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 392, Chunk 3: Final Score=0.6779, BM25=0.5270, FAISS=0.9848, Importance=1.0000, Semantic=1.0000, Coverage=0.4464, Position=0.0654, Density=0.6195, Context=1.0000
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 442, Chunk 2: Final Score=0.1171, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.2455, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0433
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 440, Chunk 2: Final Score=0.1105, BM25=0.0000, FAISS=0.3831, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 196, Chunk 1: Final Score=0.0260, BM25=0.0116, FAISS=0.0000, Importance=0.0165, Semantic=0.1469, Coverage=0.0774, Position=0.0324, Density=0.0000, Context=0.0000
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 440, Chunk 1: Final Score=0.0198, BM25=0.0155, FAISS=0.0000, Importance=0.0383, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.3373
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 431, Chunk 1: Final Score=0.0093, BM25=0.0000, FAISS=0.0322, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:46:INFO:utils.RAGProcessor:PDF 51, Chunk 2: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:46:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:46:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:46:INFO:utils.RAGProcessor:Query Features - Length: 11, Diversity: 0.92
2024-11-08 11:47:46:INFO:__main__:================================================================= QID: 2 =================================================================
2024-11-08 11:47:46:INFO:utils.text_processor.query_processor:query分詞結果: 效力/停止日/書面/多少/書面通知/多少天/本公司/要保人/停止/通知/保人
2024-11-08 11:47:46:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:46:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 428, Chunk 1, Score: 14.4161, Term Importance: 2.4736, Semantic Similarity: 0.9823, Query Coverage: 0.7094, Position Score: 0.0135, Term Density: 0.5720, Context Similarity: 7.2610, Frequency: [('本公司', 8), ('保人', 6), ('要保人', 6), ('通知', 3), ('效力', 2), ('停止', 2), ('書面', 2), ('書面通知', 2), ('停止日', 1)]
2024-11-08 11:47:46:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 428, Chunk 0, Score: 13.6830, Term Importance: 0.1077, Semantic Similarity: 0.9786, Query Coverage: 0.7094, Position Score: 0.0150, Term Density: 0.4504, Context Similarity: 8.7385, Frequency: [('本公司', 11), ('保人', 5), ('要保人', 5), ('效力', 3), ('停止', 3), ('停止日', 1), ('書面', 1), ('通知', 1), ('書面通知', 1)]
2024-11-08 11:47:46:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 565, Chunk 0, Score: 9.2878, Term Importance: 0.3302, Semantic Similarity: 0.9809, Query Coverage: 0.2110, Position Score: 0.0153, Term Density: 0.0966, Context Similarity: 10.5887, Frequency: [('本公司', 5), ('保人', 4), ('要保人', 4), ('通知', 4), ('書面', 3), ('停止', 3), ('效力', 2)]
2024-11-08 11:47:46:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 565, Chunk 3, Score: 9.2621, Term Importance: 0.3407, Semantic Similarity: 0.9806, Query Coverage: 0.2110, Position Score: 0.0248, Term Density: 0.1144, Context Similarity: 7.1746, Frequency: [('保人', 5), ('要保人', 5), ('效力', 4), ('本公司', 3), ('通知', 3), ('停止', 2), ('書面', 1)]
2024-11-08 11:47:46:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 565, Chunk 1, Score: 9.2300, Term Importance: 1.1415, Semantic Similarity: 0.9809, Query Coverage: 0.2110, Position Score: 0.0140, Term Density: 0.1271, Context Similarity: 9.3546, Frequency: [('保人', 10), ('要保人', 10), ('效力', 6), ('本公司', 5), ('停止', 5), ('通知', 2), ('書面', 1)]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:47:INFO:utils.RAGProcessor:FAISS Score: [0.7138], PDF: 258, Chunk: 2, metadata: [{}]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:FAISS Score: [0.7285], PDF: 565, Chunk: 2, metadata: [{}]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:FAISS Score: [0.7325], PDF: 258, Chunk: 1, metadata: [{}]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:FAISS Score: [0.7485], PDF: 475, Chunk: 1, metadata: [{}]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:FAISS Score: [0.7512], PDF: 565, Chunk: 3, metadata: [{}]
2024-11-08 11:47:47:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 428, Chunk 1: Final Score=0.5685, BM25=1.0000, FAISS=0.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=0.0253
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 428, Chunk 0: Final Score=0.4550, BM25=0.8586, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=1.0000, Position=0.1256, Density=0.7442, Context=0.4581
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 258, Chunk 2: Final Score=0.2885, BM25=0.0000, FAISS=1.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 565, Chunk 2: Final Score=0.1754, BM25=0.0000, FAISS=0.6081, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 565, Chunk 3: Final Score=0.1454, BM25=0.0062, FAISS=0.0000, Importance=0.0985, Semantic=0.5506, Coverage=0.0000, Position=1.0000, Density=0.0375, Context=0.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 258, Chunk 1: Final Score=0.1444, BM25=0.0000, FAISS=0.5005, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 565, Chunk 0: Final Score=0.1144, BM25=0.0111, FAISS=0.0000, Importance=0.0941, Semantic=0.6346, Coverage=0.0000, Position=0.1549, Density=0.0000, Context=1.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 565, Chunk 1: Final Score=0.0920, BM25=0.0000, FAISS=0.0000, Importance=0.4370, Semantic=0.6295, Coverage=0.0000, Position=0.0376, Density=0.0641, Context=0.6385
2024-11-08 11:47:47:INFO:utils.RAGProcessor:PDF 475, Chunk 1: Final Score=0.0211, BM25=0.0000, FAISS=0.0731, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:47:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:47:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:47:INFO:utils.RAGProcessor:Query Features - Length: 11, Diversity: 0.92
2024-11-08 11:47:47:INFO:__main__:================================================================= QID: 3 =================================================================
2024-11-08 11:47:47:INFO:utils.text_processor.query_processor:query分詞結果: 是否/受益/變更/保險金/受益人/指定/失能/可以/完全/失能保險金
2024-11-08 11:47:47:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:47:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 83, Chunk 2, Score: 8.1132, Term Importance: 0.6206, Semantic Similarity: 0.9868, Query Coverage: 0.9801, Position Score: 0.0381, Term Density: 0.5809, Context Similarity: 9.1728, Frequency: [('受益', 6), ('受益人', 6), ('指定', 6), ('保險金', 2), ('完全', 1), ('失能', 1), ('失能保險金', 1)]
2024-11-08 11:47:47:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 148, Chunk 0, Score: 4.4703, Term Importance: 1.3387, Semantic Similarity: 0.9865, Query Coverage: 0.5005, Position Score: 0.0271, Term Density: 0.2398, Context Similarity: 9.2496, Frequency: [('受益', 4), ('受益人', 4), ('變更', 4), ('保險金', 3), ('指定', 1)]
2024-11-08 11:47:48:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 476, Chunk 0, Score: 2.1565, Term Importance: 1.3355, Semantic Similarity: 0.9871, Query Coverage: 0.2607, Position Score: 0.0259, Term Density: 0.2213, Context Similarity: 15.4754, Frequency: [('受益', 7), ('受益人', 7), ('指定', 3), ('保險金', 2)]
2024-11-08 11:47:48:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 179, Chunk 0, Score: 1.9922, Term Importance: 0.6530, Semantic Similarity: 0.9862, Query Coverage: 0.2607, Position Score: 0.0346, Term Density: 0.2304, Context Similarity: 9.1061, Frequency: [('受益', 5), ('受益人', 5), ('保險金', 3), ('指定', 1)]
2024-11-08 11:47:48:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 83, Chunk 3, Score: 1.8784, Term Importance: 0.4344, Semantic Similarity: 0.9858, Query Coverage: 0.2607, Position Score: 0.0452, Term Density: 0.1515, Context Similarity: 8.1704, Frequency: [('受益', 4), ('受益人', 4), ('指定', 1), ('保險金', 1)]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:48:INFO:utils.RAGProcessor:FAISS Score: [0.6439], PDF: 83, Chunk: 2, metadata: [{}]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:FAISS Score: [0.7568], PDF: 476, Chunk: 0, metadata: [{}]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:FAISS Score: [0.7904], PDF: 179, Chunk: 0, metadata: [{}]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:FAISS Score: [0.8751], PDF: 148, Chunk: 0, metadata: [{}]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:FAISS Score: [0.9002], PDF: 83, Chunk: 3, metadata: [{}]
2024-11-08 11:47:48:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:48:INFO:utils.RAGProcessor:PDF 83, Chunk 2: Final Score=0.9049, BM25=1.0000, FAISS=1.0000, Importance=0.2059, Semantic=0.7599, Coverage=1.0000, Position=0.6344, Density=1.0000, Context=0.1372
2024-11-08 11:47:48:INFO:utils.RAGProcessor:PDF 476, Chunk 0: Final Score=0.3202, BM25=0.0446, FAISS=0.5597, Importance=0.9964, Semantic=1.0000, Coverage=0.0000, Position=0.0000, Density=0.1624, Context=1.0000
2024-11-08 11:47:48:INFO:utils.RAGProcessor:PDF 148, Chunk 0: Final Score=0.2434, BM25=0.4157, FAISS=0.0981, Importance=1.0000, Semantic=0.4936, Coverage=0.3333, Position=0.0627, Density=0.2055, Context=0.1477
2024-11-08 11:47:48:INFO:utils.RAGProcessor:PDF 179, Chunk 0: Final Score=0.2263, BM25=0.0183, FAISS=0.4283, Importance=0.2417, Semantic=0.2919, Coverage=0.0000, Position=0.4515, Density=0.1836, Context=0.1281
2024-11-08 11:47:48:INFO:utils.RAGProcessor:PDF 83, Chunk 3: Final Score=0.0962, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:48:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:48:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:48:INFO:utils.RAGProcessor:Query Features - Length: 10, Diversity: 0.91
2024-11-08 11:47:48:INFO:__main__:================================================================= QID: 4 =================================================================
2024-11-08 11:47:49:INFO:utils.text_processor.query_processor:query分詞結果: 本契約/批註/誰/內容/契約/變/更/同意/經由
2024-11-08 11:47:49:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:49:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 179, Chunk 0, Score: 8.9493, Term Importance: 1.1725, Semantic Similarity: 0.9896, Query Coverage: 0.6349, Position Score: 0.0142, Term Density: 0.2241, Context Similarity: 9.2877, Frequency: [('更', 6), ('變', 5), ('批註', 5), ('契約', 4), ('本契約', 4), ('同意', 3), ('內容', 1)]
2024-11-08 11:47:49:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 186, Chunk 0, Score: 8.7571, Term Importance: 0.7034, Semantic Similarity: 0.9887, Query Coverage: 0.6349, Position Score: 0.0162, Term Density: 0.2241, Context Similarity: 9.2916, Frequency: [('批註', 5), ('契約', 5), ('本契約', 5), ('更', 4), ('變', 3), ('同意', 3), ('內容', 1)]
2024-11-08 11:47:49:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 179, Chunk 1, Score: 8.5248, Term Importance: 0.8897, Semantic Similarity: 0.9843, Query Coverage: 0.6349, Position Score: 0.0480, Term Density: 0.2241, Context Similarity: 5.1385, Frequency: [('批註', 3), ('契約', 2), ('本契約', 2), ('同意', 2), ('內容', 1), ('變', 1), ('更', 1)]
2024-11-08 11:47:49:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 627, Chunk 12, Score: 5.9364, Term Importance: 0.1704, Semantic Similarity: 0.9818, Query Coverage: 0.4038, Position Score: 0.0188, Term Density: 0.1471, Context Similarity: 2.7628, Frequency: [('契約', 2), ('本契約', 2), ('更', 2), ('變', 1), ('批註', 1), ('同意', 1)]
2024-11-08 11:47:49:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 627, Chunk 11, Score: 5.9286, Term Importance: 0.3083, Semantic Similarity: 0.9834, Query Coverage: 0.2669, Position Score: 0.0241, Term Density: 0.1471, Context Similarity: 4.5174, Frequency: [('更', 4), ('批註', 3), ('契約', 3), ('本契約', 3), ('變', 2)]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:49:INFO:utils.RAGProcessor:FAISS Score: [0.7699], PDF: 179, Chunk: 1, metadata: [{}]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:FAISS Score: [0.8947], PDF: 179, Chunk: 0, metadata: [{}]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:FAISS Score: [0.9333], PDF: 186, Chunk: 0, metadata: [{}]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:FAISS Score: [1.0255], PDF: 174, Chunk: 1, metadata: [{}]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:FAISS Score: [1.0271], PDF: 627, Chunk: 1, metadata: [{}]
2024-11-08 11:47:49:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 179, Chunk 1: Final Score=0.8852, BM25=0.8595, FAISS=1.0000, Importance=0.7178, Semantic=0.3271, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=0.3639
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 179, Chunk 0: Final Score=0.7639, BM25=1.0000, FAISS=0.5149, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=0.9994
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 186, Chunk 0: Final Score=0.7026, BM25=0.9364, FAISS=0.3648, Importance=0.5319, Semantic=0.8825, Coverage=1.0000, Position=0.0592, Density=1.0000, Context=1.0000
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 627, Chunk 11: Final Score=0.0569, BM25=0.0000, FAISS=0.0000, Importance=0.1377, Semantic=0.2056, Coverage=0.0000, Position=0.2928, Density=0.0000, Context=0.2687
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 627, Chunk 12: Final Score=0.0567, BM25=0.0026, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.3721, Position=0.1373, Density=0.0000, Context=0.0000
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 174, Chunk 1: Final Score=0.0018, BM25=0.0000, FAISS=0.0061, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:49:INFO:utils.RAGProcessor:PDF 627, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:49:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:49:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:49:INFO:utils.RAGProcessor:Query Features - Length: 9, Diversity: 0.90
2024-11-08 11:47:49:INFO:__main__:================================================================= QID: 5 =================================================================
2024-11-08 11:47:50:INFO:utils.text_processor.query_processor:query分詞結果: 指/保額/基本
2024-11-08 11:47:50:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:50:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 162, Chunk 1, Score: 1.8666, Term Importance: 2.0051, Semantic Similarity: 0.9811, Query Coverage: 0.7324, Position Score: 0.0345, Term Density: 0.2747, Context Similarity: 6.8941, Frequency: [('保額', 8), ('基本', 7)]
2024-11-08 11:47:50:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 162, Chunk 2, Score: 1.8592, Term Importance: 2.8618, Semantic Similarity: 0.9773, Query Coverage: 0.7324, Position Score: 0.0204, Term Density: 0.3296, Context Similarity: 8.9181, Frequency: [('基本', 9), ('保額', 9)]
2024-11-08 11:47:50:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 162, Chunk 4, Score: 1.7840, Term Importance: 0.2988, Semantic Similarity: 0.9801, Query Coverage: 0.7324, Position Score: 0.0607, Term Density: 0.2197, Context Similarity: 4.6410, Frequency: [('基本', 4), ('保額', 4)]
2024-11-08 11:47:50:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 631, Chunk 0, Score: 1.6858, Term Importance: 0.1804, Semantic Similarity: 0.9789, Query Coverage: 0.7324, Position Score: 0.0213, Term Density: 0.1099, Context Similarity: 5.2267, Frequency: [('基本', 3), ('保額', 3)]
2024-11-08 11:47:50:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 162, Chunk 8, Score: 1.5717, Term Importance: 0.2425, Semantic Similarity: 0.9816, Query Coverage: 0.7324, Position Score: 0.2368, Term Density: 0.2197, Context Similarity: 2.4862, Frequency: [('基本', 2), ('保額', 2)]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:50:INFO:utils.RAGProcessor:FAISS Score: [0.7131], PDF: 162, Chunk: 1, metadata: [{}]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:FAISS Score: [0.8376], PDF: 162, Chunk: 4, metadata: [{}]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:FAISS Score: [0.8782], PDF: 162, Chunk: 2, metadata: [{}]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:FAISS Score: [0.9256], PDF: 162, Chunk: 3, metadata: [{}]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:FAISS Score: [0.9676], PDF: 162, Chunk: 7, metadata: [{}]
2024-11-08 11:47:50:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 1: Final Score=0.8498, BM25=1.0000, FAISS=1.0000, Importance=0.6805, Semantic=0.8809, Coverage=1.0000, Position=0.0650, Density=0.7500, Context=0.6853
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 2: Final Score=0.6341, BM25=0.9751, FAISS=0.3514, Importance=1.0000, Semantic=0.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=1.0000
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 4: Final Score=0.5842, BM25=0.7199, FAISS=0.5106, Importance=0.0441, Semantic=0.6403, Coverage=1.0000, Position=0.1862, Density=0.5000, Context=0.3350
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 8: Final Score=0.3606, BM25=0.0000, FAISS=0.0000, Importance=0.0231, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=0.5000, Context=0.0000
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 631, Chunk 0: Final Score=0.2544, BM25=0.3871, FAISS=0.0000, Importance=0.0000, Semantic=0.3749, Coverage=1.0000, Position=0.0039, Density=0.0000, Context=0.4261
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 3: Final Score=0.0476, BM25=0.0000, FAISS=0.1650, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:50:INFO:utils.RAGProcessor:PDF 162, Chunk 7: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:50:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:50:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:50:INFO:utils.RAGProcessor:Query Features - Length: 3, Diversity: 0.75
2024-11-08 11:47:50:INFO:__main__:================================================================= QID: 6 =================================================================
2024-11-08 11:47:51:INFO:utils.text_processor.query_processor:query分詞結果: 受益/受益人/幾日/要保人/知悉/本公司/應於/通知/應負/事故/保人/責任
2024-11-08 11:47:51:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:51:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 116, Chunk 1, Score: 13.5492, Term Importance: 0.7902, Semantic Similarity: 0.9859, Query Coverage: 0.8695, Position Score: 0.0143, Term Density: 0.6721, Context Similarity: 9.0121, Frequency: [('本公司', 10), ('保人', 5), ('要保人', 5), ('通知', 5), ('應於', 3), ('受益', 2), ('受益人', 2), ('事故', 2), ('知悉', 1), ('應負', 1)]
2024-11-08 11:47:51:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 275, Chunk 1, Score: 8.7600, Term Importance: 1.3714, Semantic Similarity: 0.9866, Query Coverage: 0.4118, Position Score: 0.0158, Term Density: 0.1628, Context Similarity: 11.9675, Frequency: [('本公司', 10), ('保人', 6), ('要保人', 6), ('責任', 6), ('事故', 3), ('受益', 2), ('受益人', 2), ('應負', 1)]
2024-11-08 11:47:51:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 242, Chunk 3, Score: 8.3029, Term Importance: 0.8082, Semantic Similarity: 0.9870, Query Coverage: 0.4118, Position Score: 0.0175, Term Density: 0.2177, Context Similarity: 10.7013, Frequency: [('本公司', 9), ('保人', 6), ('要保人', 6), ('責任', 6), ('事故', 3), ('受益', 1), ('受益人', 1), ('應負', 1)]
2024-11-08 11:47:51:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 116, Chunk 2, Score: 7.1648, Term Importance: 0.9737, Semantic Similarity: 0.9863, Query Coverage: 0.3050, Position Score: 0.0174, Term Density: 0.0934, Context Similarity: 6.3071, Frequency: [('本公司', 7), ('保人', 2), ('要保人', 2), ('受益', 2), ('受益人', 2), ('事故', 2), ('應於', 1)]
2024-11-08 11:47:51:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 338, Chunk 4, Score: 6.6826, Term Importance: 1.7525, Semantic Similarity: 0.9841, Query Coverage: 0.3324, Position Score: 0.0126, Term Density: 0.2400, Context Similarity: 7.6424, Frequency: [('本公司', 8), ('保人', 6), ('要保人', 6), ('通知', 3), ('應於', 1), ('事故', 1)]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:52:INFO:utils.RAGProcessor:FAISS Score: [0.7303], PDF: 116, Chunk: 2, metadata: [{}]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:FAISS Score: [0.7774], PDF: 242, Chunk: 4, metadata: [{}]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:FAISS Score: [0.7966], PDF: 275, Chunk: 1, metadata: [{}]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:FAISS Score: [0.7993], PDF: 338, Chunk: 4, metadata: [{}]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:FAISS Score: [0.8260], PDF: 116, Chunk: 1, metadata: [{}]
2024-11-08 11:47:52:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 116, Chunk 1: Final Score=0.5948, BM25=1.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.6227, Coverage=1.0000, Position=0.3486, Density=1.0000, Context=0.4779
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 116, Chunk 2: Final Score=0.4581, BM25=0.0702, FAISS=1.0000, Importance=0.1907, Semantic=0.7839, Coverage=0.0000, Position=0.9688, Density=0.0000, Context=0.0000
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 275, Chunk 1: Final Score=0.3769, BM25=0.3025, FAISS=0.3067, Importance=0.6040, Semantic=0.8855, Coverage=0.1891, Position=0.6588, Density=0.1198, Context=1.0000
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 242, Chunk 3: Final Score=0.3176, BM25=0.2360, FAISS=0.0000, Importance=0.0188, Semantic=1.0000, Coverage=0.1891, Position=1.0000, Density=0.2147, Context=0.7763
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 242, Chunk 4: Final Score=0.1465, BM25=0.0000, FAISS=0.5080, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:52:INFO:utils.RAGProcessor:PDF 338, Chunk 4: Final Score=0.1339, BM25=0.0000, FAISS=0.2788, Importance=1.0000, Semantic=0.0000, Coverage=0.0485, Position=0.0000, Density=0.2533, Context=0.2359
2024-11-08 11:47:52:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:52:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:52:INFO:utils.RAGProcessor:Query Features - Length: 12, Diversity: 0.92
2024-11-08 11:47:52:INFO:__main__:================================================================= QID: 7 =================================================================
2024-11-08 11:47:52:INFO:utils.text_processor.query_processor:query分詞結果: 效力/身故/本契約/保險金/契約/會/變化/給付
2024-11-08 11:47:52:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:52:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 439, Chunk 1, Score: 4.7865, Term Importance: 1.2729, Semantic Similarity: 0.9846, Query Coverage: 0.3056, Position Score: 0.0140, Term Density: 0.1133, Context Similarity: 9.9534, Frequency: [('契約', 8), ('本契約', 5), ('效力', 5), ('身故', 1), ('給付', 1), ('保險金', 1)]
2024-11-08 11:47:52:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 578, Chunk 0, Score: 4.6498, Term Importance: 0.0708, Semantic Similarity: 0.9808, Query Coverage: 0.3056, Position Score: 0.0409, Term Density: 0.0807, Context Similarity: 5.1453, Frequency: [('契約', 4), ('本契約', 3), ('給付', 2), ('身故', 1), ('保險金', 1), ('效力', 1)]
2024-11-08 11:47:52:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 486, Chunk 0, Score: 4.5841, Term Importance: 0.5913, Semantic Similarity: 0.9811, Query Coverage: 0.0730, Position Score: 0.0151, Term Density: 0.0515, Context Similarity: 14.4011, Frequency: [('給付', 10), ('保險金', 9), ('契約', 7), ('本契約', 7)]
2024-11-08 11:47:52:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 107, Chunk 5, Score: 4.5336, Term Importance: 1.0121, Semantic Similarity: 0.9832, Query Coverage: 0.1683, Position Score: 0.0135, Term Density: 0.1208, Context Similarity: 9.4624, Frequency: [('保險金', 13), ('給付', 6), ('身故', 5), ('契約', 3), ('本契約', 3)]
2024-11-08 11:47:52:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 107, Chunk 2, Score: 4.4558, Term Importance: 1.4638, Semantic Similarity: 0.9835, Query Coverage: 0.1683, Position Score: 0.0188, Term Density: 0.1589, Context Similarity: 11.2405, Frequency: [('保險金', 14), ('身故', 8), ('給付', 5), ('契約', 2), ('本契約', 2)]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:53:INFO:utils.RAGProcessor:FAISS Score: [0.6706], PDF: 107, Chunk: 5, metadata: [{}]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:FAISS Score: [0.6745], PDF: 107, Chunk: 2, metadata: [{}]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:FAISS Score: [0.8176], PDF: 107, Chunk: 3, metadata: [{}]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:FAISS Score: [0.8213], PDF: 107, Chunk: 1, metadata: [{}]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:FAISS Score: [0.8314], PDF: 439, Chunk: 1, metadata: [{}]
2024-11-08 11:47:53:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 107, Chunk 2: Final Score=0.5767, BM25=0.0000, FAISS=0.9754, Importance=1.0000, Semantic=0.6983, Coverage=0.4096, Position=0.1923, Density=1.0000, Context=0.6585
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 107, Chunk 5: Final Score=0.5534, BM25=0.2353, FAISS=1.0000, Importance=0.6757, Semantic=0.6223, Coverage=0.4096, Position=0.0000, Density=0.6453, Context=0.4664
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 439, Chunk 1: Final Score=0.5328, BM25=1.0000, FAISS=0.0000, Importance=0.8630, Semantic=1.0000, Coverage=1.0000, Position=0.0189, Density=0.5751, Context=0.5195
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 578, Chunk 0: Final Score=0.3861, BM25=0.5867, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=1.0000, Position=1.0000, Density=0.2715, Context=0.0000
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 486, Chunk 0: Final Score=0.1485, BM25=0.3881, FAISS=0.0000, Importance=0.3736, Semantic=0.0684, Coverage=0.0000, Position=0.0580, Density=0.0000, Context=1.0000
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 107, Chunk 3: Final Score=0.0247, BM25=0.0000, FAISS=0.0857, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:53:INFO:utils.RAGProcessor:PDF 107, Chunk 1: Final Score=0.0182, BM25=0.0000, FAISS=0.0633, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:53:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:53:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:53:INFO:utils.RAGProcessor:Query Features - Length: 8, Diversity: 0.89
2024-11-08 11:47:53:INFO:__main__:================================================================= QID: 8 =================================================================
2024-11-08 11:47:53:INFO:utils.text_processor.query_processor:query分詞結果: 應對/是否/書面/本契約/事項/據實/訂立/說明/契約/要保人/本公司/詢問/要保書/告知/保人
2024-11-08 11:47:53:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:53:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 78, Chunk 2, Score: 28.3319, Term Importance: 1.8948, Semantic Similarity: 0.9925, Query Coverage: 1.4341, Position Score: 0.0181, Term Density: 1.3912, Context Similarity: 11.5937, Frequency: [('契約', 12), ('本公司', 8), ('本契約', 6), ('保人', 5), ('要保人', 5), ('說明', 5), ('告知', 2), ('訂立', 2), ('要保書', 1), ('詢問', 1)]
2024-11-08 11:47:53:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 428, Chunk 2, Score: 8.8953, Term Importance: 0.0883, Semantic Similarity: 0.9862, Query Coverage: 0.1897, Position Score: 0.0179, Term Density: 0.1388, Context Similarity: 4.5490, Frequency: [('保人', 5), ('要保人', 5), ('本公司', 4), ('契約', 2), ('本契約', 2), ('訂立', 1)]
2024-11-08 11:47:53:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 244, Chunk 3, Score: 8.6833, Term Importance: 0.0972, Semantic Similarity: 0.9870, Query Coverage: 0.1198, Position Score: 0.0142, Term Density: 0.0864, Context Similarity: 9.6430, Frequency: [('契約', 8), ('本契約', 7), ('保人', 5), ('要保人', 5), ('本公司', 5), ('書面', 3), ('要保書', 1)]
2024-11-08 11:47:53:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 578, Chunk 1, Score: 8.6731, Term Importance: 0.3478, Semantic Similarity: 0.9865, Query Coverage: 0.1198, Position Score: 0.0162, Term Density: 0.0864, Context Similarity: 9.8271, Frequency: [('契約', 7), ('本公司', 6), ('本契約', 6), ('保人', 4), ('要保人', 4), ('書面', 3), ('要保書', 1)]
2024-11-08 11:47:53:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 253, Chunk 2, Score: 8.5384, Term Importance: 0.0907, Semantic Similarity: 0.9854, Query Coverage: 0.1198, Position Score: 0.0144, Term Density: 0.0864, Context Similarity: 7.9069, Frequency: [('契約', 6), ('本契約', 5), ('本公司', 5), ('保人', 5), ('要保人', 5), ('書面', 2), ('要保書', 1)]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:54:INFO:utils.RAGProcessor:FAISS Score: [0.8116], PDF: 78, Chunk: 2, metadata: [{}]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:FAISS Score: [0.8322], PDF: 78, Chunk: 3, metadata: [{}]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:FAISS Score: [0.8561], PDF: 188, Chunk: 1, metadata: [{}]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:FAISS Score: [0.8585], PDF: 244, Chunk: 1, metadata: [{}]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:FAISS Score: [0.8672], PDF: 244, Chunk: 2, metadata: [{}]
2024-11-08 11:47:54:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 78, Chunk 2: Final Score=1.0000, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=1.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 78, Chunk 3: Final Score=0.1820, BM25=0.0000, FAISS=0.6309, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 428, Chunk 2: Final Score=0.1165, BM25=0.0180, FAISS=0.0000, Importance=0.0000, Semantic=0.1104, Coverage=0.0531, Position=0.9558, Density=0.0401, Context=0.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 578, Chunk 1: Final Score=0.0985, BM25=0.0068, FAISS=0.0000, Importance=0.1436, Semantic=0.1598, Coverage=0.0000, Position=0.5058, Density=0.0000, Context=0.7492
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 188, Chunk 1: Final Score=0.0577, BM25=0.0000, FAISS=0.2000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 244, Chunk 3: Final Score=0.0540, BM25=0.0073, FAISS=0.0000, Importance=0.0050, Semantic=0.2280, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.7231
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 244, Chunk 1: Final Score=0.0456, BM25=0.0000, FAISS=0.1580, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 253, Chunk 2: Final Score=0.0287, BM25=0.0000, FAISS=0.0000, Importance=0.0013, Semantic=0.0000, Coverage=0.0000, Position=0.0601, Density=0.0000, Context=0.4767
2024-11-08 11:47:54:INFO:utils.RAGProcessor:PDF 244, Chunk 2: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:54:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:54:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:54:INFO:utils.RAGProcessor:Query Features - Length: 15, Diversity: 0.94
2024-11-08 11:47:54:INFO:__main__:================================================================= QID: 9 =================================================================
2024-11-08 11:47:55:INFO:utils.text_processor.query_processor:query分詞結果: 受益/死/受益人/被保險人/保險人/會/故意/致/喪失/致死/權利/者
2024-11-08 11:47:55:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:55:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 62, Chunk 0, Score: 19.0660, Term Importance: 0.8468, Semantic Similarity: 0.9938, Query Coverage: 1.3608, Position Score: 0.0157, Term Density: 1.0241, Context Similarity: 13.3082, Frequency: [('保險人', 8), ('被保險人', 8), ('受益', 7), ('者', 4), ('受益人', 4), ('故意', 3), ('致', 2), ('喪失', 2), ('死', 1), ('致死', 1)]
2024-11-08 11:47:55:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 62, Chunk 1, Score: 7.0181, Term Importance: 3.8731, Semantic Similarity: 0.9876, Query Coverage: 0.3156, Position Score: 0.0384, Term Density: 0.2962, Context Similarity: 14.9433, Frequency: [('受益', 8), ('受益人', 6), ('喪失', 2), ('者', 2), ('保險人', 1), ('被保險人', 1)]
2024-11-08 11:47:55:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 476, Chunk 0, Score: 5.5557, Term Importance: 1.1344, Semantic Similarity: 0.9892, Query Coverage: 0.2001, Position Score: 0.0201, Term Density: 0.1345, Context Similarity: 15.2782, Frequency: [('受益', 7), ('受益人', 7), ('保險人', 6), ('被保險人', 6), ('者', 4), ('權利', 1)]
2024-11-08 11:47:55:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 404, Chunk 1, Score: 5.4774, Term Importance: 1.2288, Semantic Similarity: 0.9881, Query Coverage: 0.2001, Position Score: 0.0179, Term Density: 0.1345, Context Similarity: 13.5474, Frequency: [('受益', 6), ('受益人', 6), ('者', 5), ('保險人', 5), ('被保險人', 5), ('權利', 1)]
2024-11-08 11:47:55:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 148, Chunk 0, Score: 5.3684, Term Importance: 0.5491, Semantic Similarity: 0.9869, Query Coverage: 0.2001, Position Score: 0.0191, Term Density: 0.1345, Context Similarity: 10.2876, Frequency: [('者', 4), ('受益', 4), ('受益人', 4), ('保險人', 4), ('被保險人', 4), ('權利', 1)]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:55:INFO:utils.RAGProcessor:FAISS Score: [0.7683], PDF: 631, Chunk: 1, metadata: [{}]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:FAISS Score: [0.7683], PDF: 631, Chunk: 1, metadata: [{}]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:FAISS Score: [0.7706], PDF: 182, Chunk: 2, metadata: [{}]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:FAISS Score: [0.7817], PDF: 182, Chunk: 1, metadata: [{}]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:FAISS Score: [0.7821], PDF: 62, Chunk: 1, metadata: [{}]
2024-11-08 11:47:55:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 62, Chunk 0: Final Score=0.5964, BM25=1.0000, FAISS=0.0000, Importance=0.0895, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=0.6053
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 631, Chunk 1: Final Score=0.2885, BM25=0.0000, FAISS=1.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 182, Chunk 2: Final Score=0.2408, BM25=0.0000, FAISS=0.8347, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 62, Chunk 1: Final Score=0.2146, BM25=0.1204, FAISS=0.0000, Importance=1.0000, Semantic=0.1051, Coverage=0.0995, Position=1.0000, Density=0.1818, Context=0.9329
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 476, Chunk 0: Final Score=0.0952, BM25=0.0137, FAISS=0.0000, Importance=0.1761, Semantic=0.3289, Coverage=0.0000, Position=0.1938, Density=0.0000, Context=1.0000
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 404, Chunk 1: Final Score=0.0562, BM25=0.0080, FAISS=0.0000, Importance=0.2045, Semantic=0.1771, Coverage=0.0000, Position=0.0973, Density=0.0000, Context=0.6532
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 148, Chunk 0: Final Score=0.0146, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.1518, Density=0.0000, Context=0.0000
2024-11-08 11:47:55:INFO:utils.RAGProcessor:PDF 182, Chunk 1: Final Score=0.0098, BM25=0.0000, FAISS=0.0338, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:55:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:55:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:55:INFO:utils.RAGProcessor:Query Features - Length: 12, Diversity: 0.92
2024-11-08 11:47:55:INFO:__main__:================================================================= QID: 10 =================================================================
2024-11-08 11:47:56:INFO:utils.text_processor.query_processor:query分詞結果: 定期/是否/展期/增值/分享/改為/金/要保人/回饋/適用/仍/給付/保人
2024-11-08 11:47:56:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:56:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 472, Chunk 4, Score: 7.5174, Term Importance: 2.2903, Semantic Similarity: 0.9943, Query Coverage: 0.5919, Position Score: 0.0137, Term Density: 0.2357, Context Similarity: 10.5900, Frequency: [('給付', 5), ('保人', 4), ('要保人', 4), ('增值', 3), ('回饋', 3), ('分享', 3), ('金', 3), ('展期', 2), ('定期', 2), ('改為', 1)]
2024-11-08 11:47:56:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 472, Chunk 2, Score: 4.9418, Term Importance: 0.1774, Semantic Similarity: 0.9946, Query Coverage: 0.3786, Position Score: 0.0205, Term Density: 0.1680, Context Similarity: 5.6031, Frequency: [('保人', 4), ('要保人', 4), ('增值', 2), ('回饋', 2), ('分享', 2), ('金', 2), ('改為', 1), ('給付', 1), ('展期', 1), ('定期', 1)]
2024-11-08 11:47:56:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 472, Chunk 3, Score: 4.6282, Term Importance: 0.5042, Semantic Similarity: 0.9927, Query Coverage: 0.1744, Position Score: 0.0149, Term Density: 0.0965, Context Similarity: 8.0696, Frequency: [('定期', 5), ('保人', 4), ('要保人', 4), ('展期', 4), ('給付', 2), ('改為', 1)]
2024-11-08 11:47:56:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 343, Chunk 2, Score: 4.3713, Term Importance: 0.1471, Semantic Similarity: 0.9947, Query Coverage: 0.3032, Position Score: 0.0186, Term Density: 0.1680, Context Similarity: 6.1496, Frequency: [('保人', 5), ('要保人', 5), ('增值', 2), ('回饋', 2), ('分享', 2), ('金', 2), ('定期', 1), ('改為', 1), ('給付', 1)]
2024-11-08 11:47:56:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 32, Chunk 2, Score: 3.9622, Term Importance: 0.8211, Semantic Similarity: 0.9932, Query Coverage: 0.1585, Position Score: 0.0184, Term Density: 0.0965, Context Similarity: 5.4593, Frequency: [('保人', 4), ('要保人', 4), ('展期', 3), ('定期', 3), ('改為', 2)]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:56:INFO:utils.RAGProcessor:FAISS Score: [0.4710], PDF: 472, Chunk: 4, metadata: [{}]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:FAISS Score: [0.6233], PDF: 472, Chunk: 3, metadata: [{}]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:FAISS Score: [0.6456], PDF: 502, Chunk: 2, metadata: [{}]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:FAISS Score: [0.6586], PDF: 32, Chunk: 2, metadata: [{}]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:FAISS Score: [0.6671], PDF: 343, Chunk: 3, metadata: [{}]
2024-11-08 11:47:56:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 472, Chunk 4: Final Score=0.8904, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=0.8252, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=1.0000
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 472, Chunk 2: Final Score=0.3656, BM25=0.2755, FAISS=0.0000, Importance=0.0142, Semantic=0.9348, Coverage=0.5080, Position=1.0000, Density=0.5131, Context=0.0280
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 343, Chunk 2: Final Score=0.2918, BM25=0.1151, FAISS=0.0000, Importance=0.0000, Semantic=1.0000, Coverage=0.3339, Position=0.7209, Density=0.5131, Context=0.1345
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 472, Chunk 3: Final Score=0.1525, BM25=0.1873, FAISS=0.2233, Importance=0.1666, Semantic=0.0000, Coverage=0.0368, Position=0.1681, Density=0.0000, Context=0.5088
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 32, Chunk 2: Final Score=0.0978, BM25=0.0000, FAISS=0.0433, Importance=0.3145, Semantic=0.2456, Coverage=0.0000, Position=0.6901, Density=0.0000, Context=0.0000
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 502, Chunk 2: Final Score=0.0316, BM25=0.0000, FAISS=0.1096, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:56:INFO:utils.RAGProcessor:PDF 343, Chunk 3: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:56:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:56:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:56:INFO:utils.RAGProcessor:Query Features - Length: 13, Diversity: 0.93
2024-11-08 11:47:56:INFO:__main__:================================================================= QID: 11 =================================================================
2024-11-08 11:47:57:INFO:utils.text_processor.query_processor:query分詞結果: 保單/借款/借/決定/上限/金額
2024-11-08 11:47:57:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:57:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 7, Chunk 1, Score: 4.3452, Term Importance: 0.7764, Semantic Similarity: 0.9925, Query Coverage: 0.6185, Position Score: 0.0136, Term Density: 0.2489, Context Similarity: 15.3589, Frequency: [('借款', 6), ('保單', 5), ('金額', 2), ('上限', 1)]
2024-11-08 11:47:57:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 141, Chunk 3, Score: 4.1432, Term Importance: 0.1165, Semantic Similarity: 0.9903, Query Coverage: 0.6185, Position Score: 0.0403, Term Density: 0.1606, Context Similarity: 4.9956, Frequency: [('借款', 2), ('金額', 1), ('上限', 1), ('保單', 1)]
2024-11-08 11:47:57:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 258, Chunk 1, Score: 4.0321, Term Importance: 0.0800, Semantic Similarity: 0.9911, Query Coverage: 0.6185, Position Score: 0.0216, Term Density: 0.1606, Context Similarity: 7.1691, Frequency: [('金額', 3), ('借款', 2), ('上限', 1), ('保單', 1)]
2024-11-08 11:47:57:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 141, Chunk 2, Score: 3.1439, Term Importance: 0.0590, Semantic Similarity: 0.9915, Query Coverage: 0.5354, Position Score: 0.0244, Term Density: 0.1606, Context Similarity: 6.6672, Frequency: [('金額', 3), ('借款', 2), ('上限', 1)]
2024-11-08 11:47:57:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 7, Chunk 0, Score: 2.8493, Term Importance: 0.3275, Semantic Similarity: 0.9916, Query Coverage: 0.2942, Position Score: 0.0172, Term Density: 0.0883, Context Similarity: 12.0310, Frequency: [('金額', 5), ('保單', 4), ('借款', 1)]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.7973], PDF: 7, Chunk: 1, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8350], PDF: 141, Chunk: 3, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8388], PDF: 325, Chunk: 2, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8388], PDF: 7, Chunk: 2, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.9025], PDF: 298, Chunk: 1, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 7, Chunk 1: Final Score=0.9038, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=1.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 141, Chunk 3: Final Score=0.6611, BM25=0.8650, FAISS=0.6411, Importance=0.0801, Semantic=0.0000, Coverage=1.0000, Position=1.0000, Density=0.4505, Context=0.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 258, Chunk 1: Final Score=0.4322, BM25=0.7907, FAISS=0.0000, Importance=0.0292, Semantic=0.3983, Coverage=1.0000, Position=0.2980, Density=0.4505, Context=0.2097
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 141, Chunk 2: Final Score=0.2859, BM25=0.1970, FAISS=0.0000, Importance=0.0000, Semantic=0.5597, Coverage=0.7436, Position=0.4040, Density=0.4505, Context=0.1613
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 325, Chunk 2: Final Score=0.1748, BM25=0.0000, FAISS=0.6059, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 7, Chunk 2: Final Score=0.1747, BM25=0.0000, FAISS=0.6056, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 7, Chunk 0: Final Score=0.0916, BM25=0.0000, FAISS=0.0000, Importance=0.3742, Semantic=0.6019, Coverage=0.0000, Position=0.1315, Density=0.0000, Context=0.6789
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 298, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Query Features - Length: 6, Diversity: 0.86
2024-11-08 11:47:58:INFO:__main__:================================================================= QID: 12 =================================================================
2024-11-08 11:47:58:INFO:utils.text_processor.query_processor:query分詞結果: 是否/受益/變更/受益人/被保險人/保險人/須經/保險公司/同意/通知
2024-11-08 11:47:58:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:58:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 526, Chunk 1, Score: 1.9663, Term Importance: 1.6911, Semantic Similarity: 0.9829, Query Coverage: 0.3470, Position Score: 0.0208, Term Density: 0.2193, Context Similarity: 12.9381, Frequency: [('受益', 6), ('受益人', 6), ('保險人', 5), ('被保險人', 5), ('通知', 4), ('同意', 3), ('保險公司', 2)]
2024-11-08 11:47:58:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 526, Chunk 0, Score: 1.8697, Term Importance: 0.3899, Semantic Similarity: 0.9849, Query Coverage: 0.3470, Position Score: 0.0218, Term Density: 0.2193, Context Similarity: 9.5565, Frequency: [('受益', 6), ('受益人', 6), ('保險人', 4), ('被保險人', 4), ('同意', 2), ('保險公司', 2), ('通知', 1)]
2024-11-08 11:47:58:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 66, Chunk 0, Score: 1.6532, Term Importance: 0.2717, Semantic Similarity: 0.9805, Query Coverage: 0.3470, Position Score: 0.0120, Term Density: 0.1427, Context Similarity: 6.9603, Frequency: [('變更', 3), ('通知', 3), ('保險人', 2), ('被保險人', 2), ('受益', 1), ('受益人', 1), ('同意', 1)]
2024-11-08 11:47:58:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 66, Chunk 1, Score: 0.6181, Term Importance: 0.0833, Semantic Similarity: 0.9712, Query Coverage: 0.0916, Position Score: 0.0531, Term Density: 0.0458, Context Similarity: 4.9690, Frequency: [('同意', 2), ('變更', 1)]
2024-11-08 11:47:58:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 526, Chunk 2, Score: 0.2485, Term Importance: 0.0000, Semantic Similarity: 0.9693, Query Coverage: 0.0000, Position Score: 0.0878, Term Density: 0.0000, Context Similarity: 4.6635, Frequency: [('同意', 2)]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.5651], PDF: 526, Chunk: 1, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8014], PDF: 66, Chunk: 1, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8050], PDF: 526, Chunk: 2, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.8437], PDF: 526, Chunk: 0, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:FAISS Score: [0.9271], PDF: 66, Chunk: 0, metadata: [{}]
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 526, Chunk 1: Final Score=0.9049, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=0.8701, Coverage=1.0000, Position=0.1152, Density=1.0000, Context=1.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 526, Chunk 0: Final Score=0.6617, BM25=0.9438, FAISS=0.2305, Importance=0.2305, Semantic=1.0000, Coverage=1.0000, Position=0.1290, Density=1.0000, Context=0.5913
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 66, Chunk 0: Final Score=0.4668, BM25=0.8178, FAISS=0.0000, Importance=0.1607, Semantic=0.7216, Coverage=1.0000, Position=0.0000, Density=0.6507, Context=0.2776
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 66, Chunk 1: Final Score=0.2736, BM25=0.2152, FAISS=0.3473, Importance=0.0493, Semantic=0.1208, Coverage=0.2640, Position=0.5418, Density=0.2089, Context=0.0369
2024-11-08 11:47:58:INFO:utils.RAGProcessor:PDF 526, Chunk 2: Final Score=0.1935, BM25=0.0000, FAISS=0.3374, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:58:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:58:INFO:utils.RAGProcessor:Query Features - Length: 10, Diversity: 0.91
2024-11-08 11:47:58:INFO:__main__:================================================================= QID: 13 =================================================================
2024-11-08 11:47:59:INFO:utils.text_processor.query_processor:query分詞結果: 變更/要保人/本公司/通知/住所/保人
2024-11-08 11:47:59:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:47:59:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 526, Chunk 1, Score: 8.1945, Term Importance: 1.0629, Semantic Similarity: 0.9843, Query Coverage: 0.8026, Position Score: 0.0156, Term Density: 0.4816, Context Similarity: 9.8299, Frequency: [('保人', 8), ('要保人', 8), ('本公司', 6), ('通知', 4), ('住所', 3)]
2024-11-08 11:47:59:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 526, Chunk 2, Score: 5.4371, Term Importance: 0.1819, Semantic Similarity: 0.9794, Query Coverage: 0.4189, Position Score: 0.0524, Term Density: 0.2513, Context Similarity: 4.7048, Frequency: [('保人', 3), ('要保人', 3), ('本公司', 3), ('住所', 2)]
2024-11-08 11:47:59:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 526, Chunk 0, Score: 4.8957, Term Importance: 0.0654, Semantic Similarity: 0.9829, Query Coverage: 0.4189, Position Score: 0.0147, Term Density: 0.1257, Context Similarity: 6.9411, Frequency: [('本公司', 6), ('保人', 5), ('要保人', 5), ('通知', 1)]
2024-11-08 11:47:59:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 502, Chunk 1, Score: 2.9116, Term Importance: 0.0947, Semantic Similarity: 0.9798, Query Coverage: 0.0351, Position Score: 0.0176, Term Density: 0.0211, Context Similarity: 4.2743, Frequency: [('保人', 5), ('要保人', 5), ('本公司', 4)]
2024-11-08 11:47:59:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 283, Chunk 2, Score: 2.8709, Term Importance: 0.1038, Semantic Similarity: 0.9799, Query Coverage: 0.0351, Position Score: 0.0208, Term Density: 0.0211, Context Similarity: 3.4159, Frequency: [('保人', 5), ('要保人', 5), ('本公司', 3)]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:59:INFO:utils.RAGProcessor:FAISS Score: [0.7472], PDF: 526, Chunk: 2, metadata: [{}]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:FAISS Score: [0.7871], PDF: 526, Chunk: 1, metadata: [{}]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:FAISS Score: [0.9498], PDF: 283, Chunk: 3, metadata: [{}]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:FAISS Score: [0.9587], PDF: 343, Chunk: 3, metadata: [{}]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:FAISS Score: [0.9637], PDF: 502, Chunk: 1, metadata: [{}]
2024-11-08 11:47:59:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 526, Chunk 1: Final Score=0.8529, BM25=1.0000, FAISS=0.8157, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.0233, Density=1.0000, Context=1.0000
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 526, Chunk 2: Final Score=0.6353, BM25=0.4820, FAISS=1.0000, Importance=0.1168, Semantic=0.0000, Coverage=0.5000, Position=1.0000, Density=0.5000, Context=0.2010
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 526, Chunk 0: Final Score=0.2598, BM25=0.3803, FAISS=0.0000, Importance=0.0000, Semantic=0.7165, Coverage=0.5000, Position=0.0000, Density=0.2271, Context=0.5496
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 283, Chunk 2: Final Score=0.0231, BM25=0.0000, FAISS=0.0000, Importance=0.0385, Semantic=0.0975, Coverage=0.0000, Position=0.1622, Density=0.0000, Context=0.0000
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 502, Chunk 1: Final Score=0.0211, BM25=0.0076, FAISS=0.0000, Importance=0.0294, Semantic=0.0741, Coverage=0.0000, Position=0.0752, Density=0.0000, Context=0.1338
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 283, Chunk 3: Final Score=0.0186, BM25=0.0000, FAISS=0.0644, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:59:INFO:utils.RAGProcessor:PDF 343, Chunk 3: Final Score=0.0067, BM25=0.0000, FAISS=0.0233, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:47:59:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:47:59:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:47:59:INFO:utils.RAGProcessor:Query Features - Length: 6, Diversity: 0.86
2024-11-08 11:47:59:INFO:__main__:================================================================= QID: 14 =================================================================
2024-11-08 11:48:00:INFO:utils.text_processor.query_processor:query分詞結果: 事項/本契約/記載/變更/誰/內容/契約/應由/同意/增刪
2024-11-08 11:48:00:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:00:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 526, Chunk 2, Score: 15.0458, Term Importance: 0.9455, Semantic Similarity: 0.9843, Query Coverage: 1.2383, Position Score: 0.0489, Term Density: 0.5483, Context Similarity: 4.8704, Frequency: [('契約', 2), ('本契約', 2), ('同意', 2), ('內容', 1), ('記載', 1), ('事項', 1), ('增刪', 1)]
2024-11-08 11:48:00:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 526, Chunk 1, Score: 13.8894, Term Importance: 0.4453, Semantic Similarity: 0.9901, Query Coverage: 1.2383, Position Score: 0.0139, Term Density: 0.5483, Context Similarity: 6.6936, Frequency: [('契約', 5), ('本契約', 5), ('同意', 3), ('內容', 1), ('記載', 1), ('事項', 1), ('增刪', 1)]
2024-11-08 11:48:00:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 243, Chunk 0, Score: 7.3330, Term Importance: 1.6480, Semantic Similarity: 0.9894, Query Coverage: 0.3654, Position Score: 0.0190, Term Density: 0.5245, Context Similarity: 16.1813, Frequency: [('契約', 11), ('本契約', 8), ('變更', 3)]
2024-11-08 11:48:00:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 149, Chunk 8, Score: 4.7930, Term Importance: 0.4450, Semantic Similarity: 0.9885, Query Coverage: 0.1575, Position Score: 0.0208, Term Density: 0.1417, Context Similarity: 15.0421, Frequency: [('契約', 9), ('本契約', 7), ('同意', 4)]
2024-11-08 11:48:00:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 627, Chunk 13, Score: 4.7506, Term Importance: 0.5870, Semantic Similarity: 0.9875, Query Coverage: 0.1575, Position Score: 0.0205, Term Density: 0.1417, Context Similarity: 14.3685, Frequency: [('契約', 8), ('本契約', 5), ('同意', 4)]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:01:INFO:utils.RAGProcessor:FAISS Score: [0.7716], PDF: 526, Chunk: 2, metadata: [{}]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:FAISS Score: [0.9003], PDF: 526, Chunk: 1, metadata: [{}]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:FAISS Score: [0.9681], PDF: 149, Chunk: 1, metadata: [{}]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:FAISS Score: [0.9815], PDF: 243, Chunk: 0, metadata: [{}]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:FAISS Score: [1.0240], PDF: 149, Chunk: 8, metadata: [{}]
2024-11-08 11:48:01:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 526, Chunk 2: Final Score=0.8750, BM25=1.0000, FAISS=1.0000, Importance=0.4160, Semantic=0.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=0.0000
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 526, Chunk 1: Final Score=0.6905, BM25=0.8877, FAISS=0.4902, Importance=0.0003, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=0.1612
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 243, Chunk 0: Final Score=0.3953, BM25=0.2508, FAISS=0.1687, Importance=1.0000, Semantic=0.8912, Coverage=0.1924, Position=0.1470, Density=0.9414, Context=1.0000
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 149, Chunk 8: Final Score=0.1193, BM25=0.0041, FAISS=0.0000, Importance=0.0000, Semantic=0.7269, Coverage=0.0000, Position=0.1994, Density=0.0000, Context=0.8993
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 627, Chunk 13: Final Score=0.1018, BM25=0.0000, FAISS=0.0000, Importance=0.1181, Semantic=0.5625, Coverage=0.0000, Position=0.1892, Density=0.0000, Context=0.8397
2024-11-08 11:48:01:INFO:utils.RAGProcessor:PDF 149, Chunk 1: Final Score=0.0639, BM25=0.0000, FAISS=0.2217, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:01:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:01:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:01:INFO:utils.RAGProcessor:Query Features - Length: 10, Diversity: 0.91
2024-11-08 11:48:01:INFO:__main__:================================================================= QID: 15 =================================================================
2024-11-08 11:48:01:INFO:utils.text_processor.query_processor:query分詞結果: 原則/本契約/解釋/契約
2024-11-08 11:48:01:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:01:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 536, Chunk 1, Score: 7.2176, Term Importance: 0.1457, Semantic Similarity: 0.9752, Query Coverage: 1.4318, Position Score: 0.0264, Term Density: 0.4250, Context Similarity: 12.4840, Frequency: [('契約', 10), ('本契約', 3), ('解釋', 2), ('原則', 1)]
2024-11-08 11:48:01:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 182, Chunk 2, Score: 1.9100, Term Importance: 0.0206, Semantic Similarity: 0.9726, Query Coverage: 0.0152, Position Score: 0.0220, Term Density: 0.0061, Context Similarity: 7.0372, Frequency: [('契約', 5), ('本契約', 5)]
2024-11-08 11:48:01:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 476, Chunk 0, Score: 1.9068, Term Importance: 0.0398, Semantic Similarity: 0.9733, Query Coverage: 0.0152, Position Score: 0.0133, Term Density: 0.0061, Context Similarity: 7.7083, Frequency: [('契約', 6), ('本契約', 6)]
2024-11-08 11:48:01:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 337, Chunk 2, Score: 1.8998, Term Importance: 0.0209, Semantic Similarity: 0.9717, Query Coverage: 0.0152, Position Score: 0.0219, Term Density: 0.0061, Context Similarity: 7.0372, Frequency: [('契約', 5), ('本契約', 5)]
2024-11-08 11:48:01:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 526, Chunk 1, Score: 1.8828, Term Importance: 0.0419, Semantic Similarity: 0.9737, Query Coverage: 0.0152, Position Score: 0.0149, Term Density: 0.0061, Context Similarity: 6.4497, Frequency: [('契約', 5), ('本契約', 5)]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:02:INFO:utils.RAGProcessor:FAISS Score: [1.0642], PDF: 476, Chunk: 1, metadata: [{}]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:FAISS Score: [1.0707], PDF: 526, Chunk: 2, metadata: [{}]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:FAISS Score: [1.0717], PDF: 66, Chunk: 1, metadata: [{}]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:FAISS Score: [1.0980], PDF: 536, Chunk: 1, metadata: [{}]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:FAISS Score: [1.1020], PDF: 148, Chunk: 1, metadata: [{}]
2024-11-08 11:48:02:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 536, Chunk 1: Final Score=0.7416, BM25=1.0000, FAISS=0.1041, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=1.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 476, Chunk 1: Final Score=0.2885, BM25=0.0000, FAISS=1.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 526, Chunk 2: Final Score=0.2391, BM25=0.0000, FAISS=0.8289, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 66, Chunk 1: Final Score=0.2315, BM25=0.0000, FAISS=0.8025, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 182, Chunk 2: Final Score=0.0894, BM25=0.0051, FAISS=0.0000, Importance=0.0000, Semantic=0.2561, Coverage=0.0000, Position=0.6641, Density=0.0000, Context=0.0974
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 337, Chunk 2: Final Score=0.0687, BM25=0.0032, FAISS=0.0000, Importance=0.0026, Semantic=0.0000, Coverage=0.0000, Position=0.6578, Density=0.0000, Context=0.0974
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 526, Chunk 1: Final Score=0.0566, BM25=0.0000, FAISS=0.0000, Importance=0.1704, Semantic=0.5844, Coverage=0.0000, Position=0.1208, Density=0.0000, Context=0.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 476, Chunk 0: Final Score=0.0474, BM25=0.0045, FAISS=0.0000, Importance=0.1536, Semantic=0.4728, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.2086
2024-11-08 11:48:02:INFO:utils.RAGProcessor:PDF 148, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:02:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:02:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:02:INFO:utils.RAGProcessor:Query Features - Length: 4, Diversity: 0.80
2024-11-08 11:48:02:INFO:__main__:================================================================= QID: 16 =================================================================
2024-11-08 11:48:02:INFO:utils.text_processor.query_processor:query分詞結果: 本公司/情況/者/保險費/處理/轉帳/金融機構/金融/交付/機構/分期/第二期/約定/以後/二期/未能/受領/第二/分期保險費
2024-11-08 11:48:02:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:02:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 54, Chunk 3, Score: 36.3870, Term Importance: 3.7830, Semantic Similarity: 0.9956, Query Coverage: 1.7170, Position Score: 0.0172, Term Density: 1.6327, Context Similarity: 11.6606, Frequency: [('交付', 7), ('本公司', 7), ('分期', 5), ('保險費', 5), ('第二', 3), ('二期', 3), ('第二期', 3), ('以後', 3), ('分期保險費', 3), ('約定', 3)]
2024-11-08 11:48:02:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 54, Chunk 4, Score: 16.8784, Term Importance: 0.8472, Semantic Similarity: 0.9952, Query Coverage: 0.6955, Position Score: 0.0163, Term Density: 0.6607, Context Similarity: 10.5903, Frequency: [('保險費', 10), ('本公司', 5), ('分期', 3), ('分期保險費', 2), ('約定', 2), ('交付', 2), ('者', 2), ('第二', 1), ('二期', 1), ('第二期', 1)]
2024-11-08 11:48:03:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 54, Chunk 2, Score: 14.0233, Term Importance: 0.8366, Semantic Similarity: 0.9953, Query Coverage: 0.5022, Position Score: 0.0153, Term Density: 0.4755, Context Similarity: 12.8723, Frequency: [('保險費', 10), ('本公司', 9), ('交付', 2), ('約定', 2), ('者', 2), ('第二', 1), ('二期', 1), ('第二期', 1), ('以後', 1)]
2024-11-08 11:48:03:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 528, Chunk 2, Score: 8.6853, Term Importance: 0.2287, Semantic Similarity: 0.9922, Query Coverage: 0.2067, Position Score: 0.0141, Term Density: 0.2090, Context Similarity: 10.6233, Frequency: [('本公司', 7), ('約定', 3), ('分期', 3), ('者', 2), ('處理', 2), ('保險費', 2), ('第二', 1)]
2024-11-08 11:48:03:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 327, Chunk 5, Score: 8.5985, Term Importance: 0.2588, Semantic Similarity: 0.9923, Query Coverage: 0.2067, Position Score: 0.0136, Term Density: 0.2090, Context Similarity: 11.3125, Frequency: [('本公司', 7), ('分期', 4), ('約定', 3), ('者', 2), ('處理', 2), ('保險費', 2), ('第二', 1)]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:03:INFO:utils.RAGProcessor:FAISS Score: [0.6394], PDF: 54, Chunk: 3, metadata: [{}]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:FAISS Score: [0.7012], PDF: 327, Chunk: 5, metadata: [{}]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:FAISS Score: [0.7025], PDF: 528, Chunk: 2, metadata: [{}]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:FAISS Score: [0.7057], PDF: 54, Chunk: 4, metadata: [{}]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:FAISS Score: [0.7138], PDF: 54, Chunk: 1, metadata: [{}]
2024-11-08 11:48:03:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 54, Chunk 3: Final Score=0.9745, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=0.4690
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 54, Chunk 4: Final Score=0.3226, BM25=0.2980, FAISS=0.1096, Importance=0.1740, Semantic=0.8778, Coverage=0.3236, Position=0.7447, Density=0.3173, Context=0.0000
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 54, Chunk 2: Final Score=0.2586, BM25=0.1952, FAISS=0.0000, Importance=0.1710, Semantic=0.9082, Coverage=0.1956, Position=0.4792, Density=0.1872, Context=1.0000
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 327, Chunk 5: Final Score=0.0674, BM25=0.0000, FAISS=0.1701, Importance=0.0085, Semantic=0.0403, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.3165
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 528, Chunk 2: Final Score=0.0571, BM25=0.0031, FAISS=0.1523, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.1227, Density=0.0000, Context=0.0145
2024-11-08 11:48:03:INFO:utils.RAGProcessor:PDF 54, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:03:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:03:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:03:INFO:utils.RAGProcessor:Query Features - Length: 19, Diversity: 0.95
2024-11-08 11:48:03:INFO:__main__:================================================================= QID: 17 =================================================================
2024-11-08 11:48:04:INFO:utils.text_processor.query_processor:query分詞結果: 金/契約/本公司/何時/應於/償付/終止/解約
2024-11-08 11:48:04:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:04:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 606, Chunk 1, Score: 10.3018, Term Importance: 1.0520, Semantic Similarity: 0.9898, Query Coverage: 1.0371, Position Score: 0.0166, Term Density: 0.4174, Context Similarity: 19.2287, Frequency: [('契約', 14), ('本公司', 8), ('終止', 5), ('解約', 3), ('金', 2), ('應於', 1), ('償付', 1)]
2024-11-08 11:48:04:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 606, Chunk 2, Score: 8.5724, Term Importance: 1.1087, Semantic Similarity: 0.9858, Query Coverage: 0.8638, Position Score: 0.0174, Term Density: 0.4056, Context Similarity: 13.8850, Frequency: [('本公司', 9), ('契約', 6), ('終止', 3), ('解約', 2), ('應於', 2), ('金', 1)]
2024-11-08 11:48:04:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 228, Chunk 1, Score: 4.2898, Term Importance: 1.0102, Semantic Similarity: 0.9857, Query Coverage: 0.3748, Position Score: 0.0132, Term Density: 0.0974, Context Similarity: 9.9519, Frequency: [('本公司', 8), ('契約', 2), ('應於', 1), ('金', 1)]
2024-11-08 11:48:04:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 341, Chunk 2, Score: 4.1481, Term Importance: 0.0730, Semantic Similarity: 0.9876, Query Coverage: 0.3109, Position Score: 0.0142, Term Density: 0.2105, Context Similarity: 13.9073, Frequency: [('契約', 8), ('本公司', 4), ('償付', 3), ('應於', 1)]
2024-11-08 11:48:04:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 353, Chunk 2, Score: 4.1395, Term Importance: 0.1069, Semantic Similarity: 0.9886, Query Coverage: 0.3109, Position Score: 0.0162, Term Density: 0.2079, Context Similarity: 13.0479, Frequency: [('契約', 6), ('本公司', 5), ('償付', 3), ('應於', 1)]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:04:INFO:utils.RAGProcessor:FAISS Score: [0.7560], PDF: 606, Chunk: 1, metadata: [{}]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:FAISS Score: [0.7671], PDF: 606, Chunk: 2, metadata: [{}]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:FAISS Score: [0.8308], PDF: 202, Chunk: 3, metadata: [{}]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:FAISS Score: [0.8458], PDF: 341, Chunk: 1, metadata: [{}]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:FAISS Score: [0.8472], PDF: 353, Chunk: 1, metadata: [{}]
2024-11-08 11:48:04:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 606, Chunk 1: Final Score=0.9815, BM25=1.0000, FAISS=1.0000, Importance=0.9452, Semantic=1.0000, Coverage=1.0000, Position=0.8074, Density=1.0000, Context=1.0000
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 606, Chunk 2: Final Score=0.7649, BM25=0.7194, FAISS=0.8784, Importance=1.0000, Semantic=0.0291, Coverage=0.7614, Position=1.0000, Density=0.9631, Context=0.4240
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 353, Chunk 2: Final Score=0.1898, BM25=0.0000, FAISS=0.0000, Importance=0.0327, Semantic=0.7073, Coverage=0.0000, Position=0.7235, Density=0.3454, Context=0.3337
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 341, Chunk 2: Final Score=0.1304, BM25=0.0014, FAISS=0.0000, Importance=0.0000, Semantic=0.4760, Coverage=0.0000, Position=0.2288, Density=0.3534, Context=0.4264
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 202, Chunk 3: Final Score=0.0518, BM25=0.0000, FAISS=0.1796, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 228, Chunk 1: Final Score=0.0158, BM25=0.0244, FAISS=0.0000, Importance=0.9049, Semantic=0.0000, Coverage=0.0879, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 341, Chunk 1: Final Score=0.0042, BM25=0.0000, FAISS=0.0147, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:04:INFO:utils.RAGProcessor:PDF 353, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:04:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:04:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:04:INFO:utils.RAGProcessor:Query Features - Length: 8, Diversity: 0.89
2024-11-08 11:48:04:INFO:__main__:================================================================= QID: 18 =================================================================
2024-11-08 11:48:05:INFO:utils.text_processor.query_processor:query分詞結果: 計算/滿期/保險金
2024-11-08 11:48:05:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:05:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 184, Chunk 4, Score: 3.5019, Term Importance: 0.4435, Semantic Similarity: 0.9825, Query Coverage: 0.7231, Position Score: 0.0203, Term Density: 0.1698, Context Similarity: 4.4327, Frequency: [('保險金', 13), ('計算', 3), ('滿期', 2)]
2024-11-08 11:48:05:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 184, Chunk 3, Score: 3.3995, Term Importance: 0.1251, Semantic Similarity: 0.9837, Query Coverage: 0.7231, Position Score: 0.0361, Term Density: 0.1085, Context Similarity: 2.5953, Frequency: [('保險金', 4), ('滿期', 2), ('計算', 1)]
2024-11-08 11:48:05:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 184, Chunk 5, Score: 3.2836, Term Importance: 0.1099, Semantic Similarity: 0.9845, Query Coverage: 0.7231, Position Score: 0.0210, Term Density: 0.0981, Context Similarity: 3.0264, Frequency: [('保險金', 4), ('計算', 2), ('滿期', 1)]
2024-11-08 11:48:05:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 184, Chunk 2, Score: 3.0818, Term Importance: 0.1327, Semantic Similarity: 0.9843, Query Coverage: 0.7231, Position Score: 0.0438, Term Density: 0.1108, Context Similarity: 1.4121, Frequency: [('保險金', 7), ('計算', 1), ('滿期', 1)]
2024-11-08 11:48:05:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 486, Chunk 1, Score: 2.1987, Term Importance: 0.4413, Semantic Similarity: 0.9823, Query Coverage: 0.2610, Position Score: 0.0168, Term Density: 0.0495, Context Similarity: 2.4865, Frequency: [('保險金', 10), ('計算', 2)]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:05:INFO:utils.RAGProcessor:FAISS Score: [0.7016], PDF: 184, Chunk: 3, metadata: [{}]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:FAISS Score: [0.7420], PDF: 184, Chunk: 5, metadata: [{}]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:FAISS Score: [0.7485], PDF: 184, Chunk: 2, metadata: [{}]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:FAISS Score: [0.7509], PDF: 184, Chunk: 4, metadata: [{}]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:FAISS Score: [0.7735], PDF: 184, Chunk: 1, metadata: [{}]
2024-11-08 11:48:05:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 184, Chunk 3: Final Score=0.8235, BM25=0.9214, FAISS=1.0000, Importance=0.0454, Semantic=0.6347, Coverage=1.0000, Position=0.7139, Density=0.4901, Context=0.3917
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 184, Chunk 4: Final Score=0.6508, BM25=1.0000, FAISS=0.3151, Importance=1.0000, Semantic=0.1159, Coverage=1.0000, Position=0.1303, Density=1.0000, Context=1.0000
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 184, Chunk 2: Final Score=0.6127, BM25=0.6776, FAISS=0.3484, Importance=0.0683, Semantic=0.9196, Coverage=1.0000, Position=1.0000, Density=0.5099, Context=0.0000
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 184, Chunk 5: Final Score=0.6095, BM25=0.8325, FAISS=0.4377, Importance=0.0000, Semantic=1.0000, Coverage=1.0000, Position=0.1542, Density=0.4038, Context=0.5344
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 486, Chunk 1: Final Score=0.0171, BM25=0.0000, FAISS=0.0000, Importance=0.9933, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.3557
2024-11-08 11:48:05:INFO:utils.RAGProcessor:PDF 184, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:05:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:05:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:05:INFO:utils.RAGProcessor:Query Features - Length: 3, Diversity: 0.75
2024-11-08 11:48:05:INFO:__main__:================================================================= QID: 19 =================================================================
2024-11-08 11:48:06:INFO:utils.text_processor.query_processor:query分詞結果: 身故/受益/保險金/檢具/受益人/哪些/文件/時應/用/申領/喪葬費/喪葬
2024-11-08 11:48:06:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:06:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 315, Chunk 2, Score: 13.4038, Term Importance: 3.5467, Semantic Similarity: 0.9843, Query Coverage: 1.0950, Position Score: 0.0189, Term Density: 0.9692, Context Similarity: 6.6847, Frequency: [('保險金', 13), ('身故', 5), ('喪葬', 3), ('喪葬費', 3), ('用', 3), ('申領', 3), ('受益', 2), ('受益人', 2), ('時應', 1), ('檢具', 1)]
2024-11-08 11:48:06:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 392, Chunk 0, Score: 8.8104, Term Importance: 1.2772, Semantic Similarity: 0.9842, Query Coverage: 0.6319, Position Score: 0.0174, Term Density: 0.4397, Context Similarity: 8.4052, Frequency: [('保險金', 8), ('受益', 5), ('受益人', 5), ('申領', 4), ('文件', 2), ('身故', 1), ('喪葬', 1), ('喪葬費', 1), ('用', 1)]
2024-11-08 11:48:06:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 223, Chunk 3, Score: 8.2297, Term Importance: 1.3709, Semantic Similarity: 0.9814, Query Coverage: 0.6319, Position Score: 0.0214, Term Density: 0.3951, Context Similarity: 6.6906, Frequency: [('保險金', 12), ('身故', 4), ('喪葬', 2), ('喪葬費', 2), ('用', 2), ('申領', 2), ('受益', 2), ('受益人', 2), ('文件', 1)]
2024-11-08 11:48:06:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 223, Chunk 2, Score: 8.0119, Term Importance: 0.5247, Semantic Similarity: 0.9834, Query Coverage: 0.6133, Position Score: 0.0179, Term Density: 0.3239, Context Similarity: 9.0473, Frequency: [('保險金', 8), ('身故', 4), ('受益', 3), ('受益人', 3), ('文件', 3), ('喪葬', 3), ('喪葬費', 3), ('用', 3), ('檢具', 1)]
2024-11-08 11:48:06:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 188, Chunk 0, Score: 7.0536, Term Importance: 0.4759, Semantic Similarity: 0.9817, Query Coverage: 0.3667, Position Score: 0.0136, Term Density: 0.2200, Context Similarity: 8.8336, Frequency: [('受益', 6), ('受益人', 6), ('保險金', 2), ('申領', 1), ('文件', 1)]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:07:INFO:utils.RAGProcessor:FAISS Score: [0.6379], PDF: 315, Chunk: 2, metadata: [{}]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:FAISS Score: [0.7313], PDF: 387, Chunk: 2, metadata: [{}]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:FAISS Score: [0.7324], PDF: 172, Chunk: 2, metadata: [{}]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:FAISS Score: [0.7906], PDF: 223, Chunk: 5, metadata: [{}]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:FAISS Score: [0.7913], PDF: 431, Chunk: 1, metadata: [{}]
2024-11-08 11:48:07:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 315, Chunk 2: Final Score=0.9208, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.6760, Density=1.0000, Context=0.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 392, Chunk 0: Final Score=0.3048, BM25=0.2767, FAISS=0.0000, Importance=0.2609, Semantic=0.9696, Coverage=0.3642, Position=0.4892, Density=0.2933, Context=0.7282
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 223, Chunk 2: Final Score=0.2496, BM25=0.1509, FAISS=0.0000, Importance=0.0159, Semantic=0.7087, Coverage=0.3386, Position=0.5519, Density=0.1388, Context=1.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 223, Chunk 3: Final Score=0.2147, BM25=0.1852, FAISS=0.0000, Importance=0.2914, Semantic=0.0000, Coverage=0.3642, Position=1.0000, Density=0.2337, Context=0.0025
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 387, Chunk 2: Final Score=0.1128, BM25=0.0000, FAISS=0.3912, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 172, Chunk 2: Final Score=0.1108, BM25=0.0000, FAISS=0.3840, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 188, Chunk 0: Final Score=0.0507, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0900, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.9095
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 223, Chunk 5: Final Score=0.0015, BM25=0.0000, FAISS=0.0051, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:PDF 431, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:07:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:07:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:07:INFO:utils.RAGProcessor:Query Features - Length: 12, Diversity: 0.92
2024-11-08 11:48:07:INFO:__main__:================================================================= QID: 20 =================================================================
2024-11-08 11:48:07:INFO:utils.text_processor.query_processor:query分詞結果: 計算/保險金/進行/失能/依據/方式/標準/完全/失能保險金
2024-11-08 11:48:07:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:07:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 292, Chunk 2, Score: 6.3980, Term Importance: 2.3392, Semantic Similarity: 0.9844, Query Coverage: 0.6271, Position Score: 0.0160, Term Density: 0.5263, Context Similarity: 6.9513, Frequency: [('保險金', 13), ('完全', 7), ('失能', 7), ('失能保險金', 5), ('方式', 4), ('計算', 2)]
2024-11-08 11:48:07:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 292, Chunk 3, Score: 6.0573, Term Importance: 2.3532, Semantic Similarity: 0.9851, Query Coverage: 0.6271, Position Score: 0.0140, Term Density: 0.5463, Context Similarity: 6.4203, Frequency: [('完全', 8), ('失能', 8), ('保險金', 7), ('失能保險金', 5), ('計算', 3), ('方式', 1)]
2024-11-08 11:48:07:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 292, Chunk 4, Score: 6.0263, Term Importance: 5.4069, Semantic Similarity: 0.9839, Query Coverage: 0.6271, Position Score: 0.0277, Term Density: 0.4567, Context Similarity: 3.3275, Frequency: [('保險金', 7), ('失能', 6), ('完全', 5), ('失能保險金', 5), ('方式', 1), ('計算', 1)]
2024-11-08 11:48:07:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 578, Chunk 0, Score: 3.1880, Term Importance: 0.0444, Semantic Similarity: 0.9811, Query Coverage: 0.3636, Position Score: 0.0200, Term Density: 0.1322, Context Similarity: 2.0310, Frequency: [('完全', 1), ('失能', 1), ('保險金', 1), ('方式', 1)]
2024-11-08 11:48:07:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 292, Chunk 1, Score: 2.0642, Term Importance: 0.1517, Semantic Similarity: 0.9844, Query Coverage: 0.1793, Position Score: 0.0148, Term Density: 0.0649, Context Similarity: 2.3104, Frequency: [('保險金', 4), ('計算', 1), ('方式', 1)]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:08:INFO:utils.RAGProcessor:FAISS Score: [0.6801], PDF: 292, Chunk: 4, metadata: [{}]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:FAISS Score: [0.7264], PDF: 292, Chunk: 3, metadata: [{}]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:FAISS Score: [0.7451], PDF: 292, Chunk: 2, metadata: [{}]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:FAISS Score: [0.8981], PDF: 486, Chunk: 1, metadata: [{}]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:FAISS Score: [0.9070], PDF: 292, Chunk: 1, metadata: [{}]
2024-11-08 11:48:08:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 292, Chunk 4: Final Score=0.8943, BM25=0.9142, FAISS=1.0000, Importance=1.0000, Semantic=0.6925, Coverage=1.0000, Position=1.0000, Density=0.8139, Context=0.2635
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 292, Chunk 3: Final Score=0.8216, BM25=0.9214, FAISS=0.7957, Importance=0.4305, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=0.8921
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 292, Chunk 2: Final Score=0.8159, BM25=1.0000, FAISS=0.7134, Importance=0.4279, Semantic=0.8264, Coverage=1.0000, Position=0.1470, Density=0.9584, Context=1.0000
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 578, Chunk 0: Final Score=0.1696, BM25=0.2593, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.4115, Position=0.4384, Density=0.1397, Context=0.0000
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 292, Chunk 1: Final Score=0.0712, BM25=0.0000, FAISS=0.0000, Importance=0.0200, Semantic=0.8155, Coverage=0.0000, Position=0.0602, Density=0.0000, Context=0.0568
2024-11-08 11:48:08:INFO:utils.RAGProcessor:PDF 486, Chunk 1: Final Score=0.0113, BM25=0.0000, FAISS=0.0391, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:08:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:08:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:08:INFO:utils.RAGProcessor:Query Features - Length: 9, Diversity: 0.90
2024-11-08 11:48:08:INFO:__main__:================================================================= QID: 21 =================================================================
2024-11-08 11:48:08:INFO:utils.text_processor.query_processor:query分詞結果: 受益/保險金/檢具/受益人/哪些/文件/失能/時應/申領/完全/失能保險金
2024-11-08 11:48:08:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:08:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 36, Chunk 1, Score: 16.6245, Term Importance: 5.9512, Semantic Similarity: 0.9706, Query Coverage: 1.2856, Position Score: 0.0357, Term Density: 1.0113, Context Similarity: 5.0576, Frequency: [('保險金', 7), ('失能', 6), ('完全', 5), ('失能保險金', 5), ('受益', 4), ('受益人', 4), ('申領', 3), ('時應', 1), ('檢具', 1), ('文件', 1)]
2024-11-08 11:48:08:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 392, Chunk 0, Score: 11.0835, Term Importance: 1.4892, Semantic Similarity: 0.9702, Query Coverage: 0.7409, Position Score: 0.0144, Term Density: 0.4022, Context Similarity: 9.1405, Frequency: [('保險金', 8), ('受益', 5), ('受益人', 5), ('申領', 4), ('完全', 4), ('失能', 4), ('文件', 2), ('失能保險金', 1)]
2024-11-08 11:48:08:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 639, Chunk 1, Score: 10.0505, Term Importance: 1.2064, Semantic Similarity: 0.9699, Query Coverage: 0.7409, Position Score: 0.0225, Term Density: 0.3905, Context Similarity: 3.7421, Frequency: [('保險金', 11), ('受益', 3), ('受益人', 3), ('申領', 2), ('完全', 1), ('失能', 1), ('失能保險金', 1), ('文件', 1)]
2024-11-08 11:48:08:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 8, Chunk 1, Score: 10.0505, Term Importance: 1.2044, Semantic Similarity: 0.9694, Query Coverage: 0.7409, Position Score: 0.0220, Term Density: 0.3905, Context Similarity: 3.7421, Frequency: [('保險金', 11), ('受益', 3), ('受益人', 3), ('申領', 2), ('完全', 1), ('失能', 1), ('失能保險金', 1), ('文件', 1)]
2024-11-08 11:48:08:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 8, Chunk 1, Score: 10.0505, Term Importance: 1.2044, Semantic Similarity: 0.9694, Query Coverage: 0.7409, Position Score: 0.0220, Term Density: 0.3905, Context Similarity: 3.7421, Frequency: [('保險金', 11), ('受益', 3), ('受益人', 3), ('申領', 2), ('完全', 1), ('失能', 1), ('失能保險金', 1), ('文件', 1)]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:09:INFO:utils.RAGProcessor:FAISS Score: [0.6184], PDF: 36, Chunk: 1, metadata: [{}]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:FAISS Score: [0.6670], PDF: 36, Chunk: 2, metadata: [{}]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:FAISS Score: [0.8099], PDF: 392, Chunk: 1, metadata: [{}]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:FAISS Score: [0.8744], PDF: 338, Chunk: 5, metadata: [{}]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:FAISS Score: [0.8918], PDF: 392, Chunk: 0, metadata: [{}]
2024-11-08 11:48:09:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 36, Chunk 1: Final Score=0.9636, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=0.2437
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 36, Chunk 2: Final Score=0.2372, BM25=0.0000, FAISS=0.8225, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 392, Chunk 0: Final Score=0.1380, BM25=0.1571, FAISS=0.0000, Importance=0.0600, Semantic=0.6615, Coverage=0.0000, Position=0.0000, Density=0.0190, Context=1.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 392, Chunk 1: Final Score=0.0865, BM25=0.0000, FAISS=0.2998, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 639, Chunk 1: Final Score=0.0687, BM25=0.0000, FAISS=0.0000, Importance=0.0004, Semantic=0.4206, Coverage=0.0000, Position=0.3784, Density=0.0000, Context=0.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 8, Chunk 1: Final Score=0.0345, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.3584, Density=0.0000, Context=0.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:PDF 338, Chunk 5: Final Score=0.0184, BM25=0.0000, FAISS=0.0637, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:09:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:09:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:09:INFO:utils.RAGProcessor:Query Features - Length: 11, Diversity: 0.92
2024-11-08 11:48:09:INFO:__main__:================================================================= QID: 22 =================================================================
2024-11-08 11:48:10:INFO:utils.text_processor.query_processor:query分詞結果: 第一次/定期/分期/受益/一次/保險金/受益人/本公司/何時/申領/應於/第一/給付
2024-11-08 11:48:10:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:10:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 614, Chunk 1, Score: 18.1100, Term Importance: 7.1266, Semantic Similarity: 0.9899, Query Coverage: 1.1297, Position Score: 0.0178, Term Density: 0.8383, Context Similarity: 20.7771, Frequency: [('給付', 15), ('保險金', 12), ('受益', 8), ('受益人', 8), ('申領', 7), ('分期', 6), ('定期', 6), ('本公司', 5), ('第一', 2), ('一次', 2)]
2024-11-08 11:48:10:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 614, Chunk 0, Score: 11.4044, Term Importance: 6.1163, Semantic Similarity: 0.9881, Query Coverage: 0.6801, Position Score: 0.0197, Term Density: 0.6788, Context Similarity: 23.5577, Frequency: [('保險金', 13), ('給付', 11), ('定期', 8), ('分期', 7), ('受益', 6), ('受益人', 6), ('本公司', 5), ('申領', 1)]
2024-11-08 11:48:10:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 439, Chunk 2, Score: 4.7242, Term Importance: 0.1268, Semantic Similarity: 0.9797, Query Coverage: 0.1649, Position Score: 0.0243, Term Density: 0.1530, Context Similarity: 8.1159, Frequency: [('給付', 5), ('保險金', 2), ('本公司', 2), ('一次', 2), ('第一', 1)]
2024-11-08 11:48:10:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 578, Chunk 0, Score: 4.0900, Term Importance: 0.1130, Semantic Similarity: 0.9861, Query Coverage: 0.1428, Position Score: 0.0164, Term Density: 0.0693, Context Similarity: 11.4874, Frequency: [('本公司', 8), ('分期', 3), ('給付', 2), ('第一', 1), ('保險金', 1)]
2024-11-08 11:48:10:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 486, Chunk 0, Score: 3.9171, Term Importance: 0.6155, Semantic Similarity: 0.9831, Query Coverage: 0.1509, Position Score: 0.0139, Term Density: 0.1269, Context Similarity: 13.4354, Frequency: [('給付', 10), ('保險金', 9), ('本公司', 3), ('一次', 1)]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:10:INFO:utils.RAGProcessor:FAISS Score: [0.5428], PDF: 614, Chunk: 1, metadata: [{}]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:FAISS Score: [0.6934], PDF: 614, Chunk: 0, metadata: [{}]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:FAISS Score: [0.8013], PDF: 578, Chunk: 0, metadata: [{}]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:FAISS Score: [0.8259], PDF: 486, Chunk: 1, metadata: [{}]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:FAISS Score: [0.8465], PDF: 486, Chunk: 2, metadata: [{}]
2024-11-08 11:48:10:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 614, Chunk 1: Final Score=0.9309, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.3717, Density=1.0000, Context=0.8199
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 614, Chunk 0: Final Score=0.6096, BM25=0.5275, FAISS=0.5039, Importance=0.8560, Semantic=0.8248, Coverage=0.5444, Position=0.5602, Density=0.7925, Context=1.0000
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 439, Chunk 2: Final Score=0.1276, BM25=0.0569, FAISS=0.0000, Importance=0.0020, Semantic=0.0000, Coverage=0.0224, Position=1.0000, Density=0.1088, Context=0.0000
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 578, Chunk 0: Final Score=0.1271, BM25=0.0122, FAISS=0.1487, Importance=0.0000, Semantic=0.6217, Coverage=0.0000, Position=0.2397, Density=0.0000, Context=0.2183
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 486, Chunk 0: Final Score=0.0537, BM25=0.0000, FAISS=0.0000, Importance=0.0716, Semantic=0.3301, Coverage=0.0082, Position=0.0000, Density=0.0748, Context=0.3445
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 486, Chunk 1: Final Score=0.0196, BM25=0.0000, FAISS=0.0679, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:10:INFO:utils.RAGProcessor:PDF 486, Chunk 2: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:10:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:10:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:10:INFO:utils.RAGProcessor:Query Features - Length: 13, Diversity: 0.93
2024-11-08 11:48:10:INFO:__main__:================================================================= QID: 23 =================================================================
2024-11-08 11:48:11:INFO:utils.text_processor.query_processor:query分詞結果: 保險費/保險金/金額/本公司/欠繳/會/項目/未還/款項/影響/給付
2024-11-08 11:48:11:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:11:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 224, Chunk 0, Score: 9.8123, Term Importance: 0.4090, Semantic Similarity: 0.9906, Query Coverage: 0.7098, Position Score: 0.0231, Term Density: 0.3648, Context Similarity: 7.5282, Frequency: [('保險金', 5), ('本公司', 4), ('給付', 3), ('保險費', 3), ('欠繳', 2), ('未還', 1), ('款項', 1), ('金額', 1)]
2024-11-08 11:48:11:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 228, Chunk 1, Score: 5.4754, Term Importance: 0.1875, Semantic Similarity: 0.9887, Query Coverage: 0.2542, Position Score: 0.0152, Term Density: 0.0816, Context Similarity: 16.2033, Frequency: [('保險費', 10), ('本公司', 8), ('金額', 4), ('保險金', 3), ('給付', 2), ('項目', 1)]
2024-11-08 11:48:11:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 228, Chunk 0, Score: 4.6500, Term Importance: 0.1114, Semantic Similarity: 0.9907, Query Coverage: 0.2340, Position Score: 0.0170, Term Density: 0.1609, Context Similarity: 13.2700, Frequency: [('本公司', 10), ('給付', 2), ('款項', 2), ('保險費', 1), ('金額', 1)]
2024-11-08 11:48:11:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 224, Chunk 1, Score: 4.6363, Term Importance: 0.1991, Semantic Similarity: 0.9913, Query Coverage: 0.2244, Position Score: 0.0222, Term Density: 0.1306, Context Similarity: 12.9161, Frequency: [('保險費', 7), ('本公司', 3), ('欠繳', 2), ('給付', 1)]
2024-11-08 11:48:11:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 337, Chunk 0, Score: 4.4766, Term Importance: 0.2773, Semantic Similarity: 0.9892, Query Coverage: 0.2078, Position Score: 0.0192, Term Density: 0.0971, Context Similarity: 16.8004, Frequency: [('保險費', 11), ('本公司', 6), ('給付', 3), ('項目', 1), ('金額', 1)]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:11:INFO:utils.RAGProcessor:FAISS Score: [0.7015], PDF: 99, Chunk: 1, metadata: [{}]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:FAISS Score: [0.7614], PDF: 337, Chunk: 1, metadata: [{}]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:FAISS Score: [0.7701], PDF: 428, Chunk: 2, metadata: [{}]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:FAISS Score: [0.7741], PDF: 228, Chunk: 2, metadata: [{}]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:FAISS Score: [0.7745], PDF: 228, Chunk: 1, metadata: [{}]
2024-11-08 11:48:11:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 224, Chunk 0: Final Score=0.6414, BM25=1.0000, FAISS=0.0000, Importance=1.0000, Semantic=0.7126, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=0.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 99, Chunk 1: Final Score=0.2885, BM25=0.0000, FAISS=1.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 224, Chunk 1: Final Score=0.2249, BM25=0.0299, FAISS=0.0000, Importance=0.2948, Semantic=1.0000, Coverage=0.0330, Position=0.8772, Density=0.1729, Context=0.5811
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 228, Chunk 0: Final Score=0.1639, BM25=0.0325, FAISS=0.0000, Importance=0.0000, Semantic=0.7540, Coverage=0.0521, Position=0.2314, Density=0.2802, Context=0.6192
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 337, Chunk 0: Final Score=0.1178, BM25=0.0000, FAISS=0.0000, Importance=0.5576, Semantic=0.1708, Coverage=0.0000, Position=0.5060, Density=0.0548, Context=1.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 228, Chunk 1: Final Score=0.0989, BM25=0.1872, FAISS=0.0000, Importance=0.2556, Semantic=0.0000, Coverage=0.0925, Position=0.0000, Density=0.0000, Context=0.9356
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 337, Chunk 1: Final Score=0.0518, BM25=0.0000, FAISS=0.1795, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 428, Chunk 2: Final Score=0.0173, BM25=0.0000, FAISS=0.0599, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:PDF 228, Chunk 2: Final Score=0.0017, BM25=0.0000, FAISS=0.0057, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:11:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:11:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:11:INFO:utils.RAGProcessor:Query Features - Length: 11, Diversity: 0.92
2024-11-08 11:48:11:INFO:__main__:================================================================= QID: 24 =================================================================
2024-11-08 11:48:12:INFO:utils.text_processor.query_processor:query分詞結果: 定期/是否/展期/保險費/改為/要保人/繼續/繳/保人
2024-11-08 11:48:12:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:12:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 359, Chunk 2, Score: 7.9670, Term Importance: 0.9682, Semantic Similarity: 0.9936, Query Coverage: 0.6843, Position Score: 0.0148, Term Density: 0.2735, Context Similarity: 12.5328, Frequency: [('保險費', 7), ('展期', 6), ('定期', 6), ('保人', 5), ('要保人', 5), ('改為', 2), ('繼續', 1), ('繳', 1)]
2024-11-08 11:48:12:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 62, Chunk 2, Score: 7.5042, Term Importance: 0.3823, Semantic Similarity: 0.9934, Query Coverage: 0.6843, Position Score: 0.0199, Term Density: 0.2118, Context Similarity: 5.5363, Frequency: [('保險費', 6), ('保人', 4), ('要保人', 4), ('繼續', 2), ('繳', 1), ('改為', 1), ('展期', 1), ('定期', 1)]
2024-11-08 11:48:12:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 343, Chunk 2, Score: 6.1220, Term Importance: 0.2290, Semantic Similarity: 0.9932, Query Coverage: 0.5112, Position Score: 0.0208, Term Density: 0.2118, Context Similarity: 6.2110, Frequency: [('保險費', 6), ('保人', 5), ('要保人', 5), ('繼續', 2), ('定期', 1), ('繳', 1), ('改為', 1)]
2024-11-08 11:48:12:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 343, Chunk 3, Score: 6.0205, Term Importance: 0.2380, Semantic Similarity: 0.9914, Query Coverage: 0.4079, Position Score: 0.0460, Term Density: 0.1781, Context Similarity: 4.5010, Frequency: [('保險費', 3), ('展期', 2), ('定期', 2), ('保人', 2), ('要保人', 2), ('改為', 1)]
2024-11-08 11:48:12:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 625, Chunk 2, Score: 5.5467, Term Importance: 0.4104, Semantic Similarity: 0.9927, Query Coverage: 0.4504, Position Score: 0.0250, Term Density: 0.2118, Context Similarity: 7.4374, Frequency: [('保險費', 7), ('保人', 4), ('要保人', 4), ('繼續', 2), ('繳', 1), ('改為', 1)]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:12:INFO:utils.RAGProcessor:FAISS Score: [0.4832], PDF: 359, Chunk: 2, metadata: [{}]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:FAISS Score: [0.5608], PDF: 343, Chunk: 3, metadata: [{}]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:FAISS Score: [0.6456], PDF: 62, Chunk: 2, metadata: [{}]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:FAISS Score: [0.6898], PDF: 343, Chunk: 2, metadata: [{}]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:FAISS Score: [0.6945], PDF: 625, Chunk: 2, metadata: [{}]
2024-11-08 11:48:12:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:12:INFO:utils.RAGProcessor:PDF 359, Chunk 2: Final Score=0.9038, BM25=1.0000, FAISS=1.0000, Importance=1.0000, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=1.0000
2024-11-08 11:48:12:INFO:utils.RAGProcessor:PDF 62, Chunk 2: Final Score=0.5105, BM25=0.8088, FAISS=0.2314, Importance=0.2073, Semantic=0.8960, Coverage=1.0000, Position=0.1627, Density=0.3531, Context=0.1289
2024-11-08 11:48:12:INFO:utils.RAGProcessor:PDF 343, Chunk 3: Final Score=0.3238, BM25=0.1957, FAISS=0.6327, Importance=0.0122, Semantic=0.0000, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:12:INFO:utils.RAGProcessor:PDF 343, Chunk 2: Final Score=0.2470, BM25=0.2377, FAISS=0.0222, Importance=0.0000, Semantic=0.8171, Coverage=0.3737, Position=0.1933, Density=0.3531, Context=0.2129
2024-11-08 11:48:12:INFO:utils.RAGProcessor:PDF 625, Chunk 2: Final Score=0.1624, BM25=0.0000, FAISS=0.0000, Importance=0.2454, Semantic=0.5795, Coverage=0.1540, Position=0.3277, Density=0.3531, Context=0.3656
2024-11-08 11:48:12:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:12:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:12:INFO:utils.RAGProcessor:Query Features - Length: 9, Diversity: 0.90
2024-11-08 11:48:12:INFO:__main__:================================================================= QID: 25 =================================================================
2024-11-08 11:48:13:INFO:utils.text_processor.query_processor:query分詞結果: 費用/誰/匯款/負擔/相關
2024-11-08 11:48:13:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:13:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 4, Chunk 0, Score: 8.8004, Term Importance: 2.2214, Semantic Similarity: 0.9918, Query Coverage: 1.5073, Position Score: 0.0193, Term Density: 0.8890, Context Similarity: 26.8552, Frequency: [('費用', 8), ('匯款', 7), ('相關', 7), ('負擔', 4)]
2024-11-08 11:48:13:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 4, Chunk 1, Score: 8.1921, Term Importance: 3.7929, Semantic Similarity: 0.9897, Query Coverage: 1.5073, Position Score: 0.0401, Term Density: 0.7830, Context Similarity: 18.1935, Frequency: [('相關', 6), ('匯款', 6), ('費用', 3), ('負擔', 1)]
2024-11-08 11:48:13:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 434, Chunk 2, Score: 4.4608, Term Importance: 0.0444, Semantic Similarity: 0.9876, Query Coverage: 0.9657, Position Score: 0.2495, Term Density: 0.2414, Context Similarity: 4.3170, Frequency: [('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-08 11:48:13:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 254, Chunk 0, Score: 4.0840, Term Importance: 0.0261, Semantic Similarity: 0.9879, Query Coverage: 0.9657, Position Score: 0.2477, Term Density: 0.2414, Context Similarity: 3.6458, Frequency: [('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-08 11:48:13:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 196, Chunk 1, Score: 3.8888, Term Importance: 0.0414, Semantic Similarity: 0.9873, Query Coverage: 0.9657, Position Score: 0.2813, Term Density: 0.2414, Context Similarity: 4.5268, Frequency: [('相關', 1), ('費用', 1), ('負擔', 1)]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:14:INFO:utils.RAGProcessor:FAISS Score: [0.8610], PDF: 4, Chunk: 1, metadata: [{}]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:FAISS Score: [0.8630], PDF: 4, Chunk: 0, metadata: [{}]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:FAISS Score: [1.0362], PDF: 591, Chunk: 2, metadata: [{}]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:FAISS Score: [1.0481], PDF: 518, Chunk: 2, metadata: [{}]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:FAISS Score: [1.0511], PDF: 40, Chunk: 1, metadata: [{}]
2024-11-08 11:48:14:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 4, Chunk 0: Final Score=0.9009, BM25=1.0000, FAISS=0.9897, Importance=0.5828, Semantic=1.0000, Coverage=1.0000, Position=0.0000, Density=1.0000, Context=1.0000
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 4, Chunk 1: Final Score=0.8056, BM25=0.8762, FAISS=1.0000, Importance=1.0000, Semantic=0.5352, Coverage=1.0000, Position=0.0793, Density=0.8363, Context=0.6268
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 434, Chunk 2: Final Score=0.1169, BM25=0.1165, FAISS=0.0000, Importance=0.0049, Semantic=0.0535, Coverage=0.0000, Position=0.8789, Density=0.0000, Context=0.0289
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 254, Chunk 0: Final Score=0.1029, BM25=0.0398, FAISS=0.0000, Importance=0.0000, Semantic=0.1283, Coverage=0.0000, Position=0.8719, Density=0.0000, Context=0.0000
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 196, Chunk 1: Final Score=0.0980, BM25=0.0000, FAISS=0.0000, Importance=0.0040, Semantic=0.0000, Coverage=0.0000, Position=1.0000, Density=0.0000, Context=0.0380
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 591, Chunk 2: Final Score=0.0227, BM25=0.0000, FAISS=0.0786, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 518, Chunk 2: Final Score=0.0046, BM25=0.0000, FAISS=0.0158, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:14:INFO:utils.RAGProcessor:PDF 40, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:14:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:14:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:14:INFO:utils.RAGProcessor:Query Features - Length: 5, Diversity: 0.83
2024-11-08 11:48:14:INFO:__main__:================================================================= QID: 26 =================================================================
2024-11-08 11:48:14:INFO:utils.text_processor.query_processor:query分詞結果: 計算/投保/被保險人/保險人/基準/年齡
2024-11-08 11:48:14:INFO:utils.text_processor.query_processor:query擴展詞: 
2024-11-08 11:48:14:INFO:utils.text_processor.document_processor:BM25 Rank 1: PDF 147, Chunk 2, Score: 9.9260, Term Importance: 2.8196, Semantic Similarity: 0.9859, Query Coverage: 1.5652, Position Score: 0.0250, Term Density: 0.8586, Context Similarity: 15.9749, Frequency: [('投保', 7), ('年齡', 7), ('計算', 3), ('保險人', 3), ('被保險人', 3)]
2024-11-08 11:48:14:INFO:utils.text_processor.document_processor:BM25 Rank 2: PDF 147, Chunk 3, Score: 4.4067, Term Importance: 0.9965, Semantic Similarity: 0.9798, Query Coverage: 0.9983, Position Score: 0.0141, Term Density: 0.2190, Context Similarity: 7.1509, Frequency: [('保險人', 6), ('被保險人', 6), ('年齡', 1), ('計算', 1)]
2024-11-08 11:48:15:INFO:utils.text_processor.document_processor:BM25 Rank 3: PDF 343, Chunk 0, Score: 2.0176, Term Importance: 0.5953, Semantic Similarity: 0.9776, Query Coverage: 0.5470, Position Score: 0.0148, Term Density: 0.0836, Context Similarity: 5.5778, Frequency: [('保險人', 4), ('被保險人', 4), ('計算', 1)]
2024-11-08 11:48:15:INFO:utils.text_processor.document_processor:BM25 Rank 4: PDF 283, Chunk 0, Score: 1.9952, Term Importance: 0.4137, Semantic Similarity: 0.9780, Query Coverage: 0.5470, Position Score: 0.0148, Term Density: 0.0836, Context Similarity: 5.7895, Frequency: [('保險人', 4), ('被保險人', 4), ('計算', 1)]
2024-11-08 11:48:15:INFO:utils.text_processor.document_processor:BM25 Rank 5: PDF 207, Chunk 1, Score: 1.9718, Term Importance: 3.1585, Semantic Similarity: 0.9775, Query Coverage: 0.5470, Position Score: 0.0152, Term Density: 0.0836, Context Similarity: 5.5778, Frequency: [('保險人', 4), ('被保險人', 4), ('計算', 1)]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:15:INFO:utils.RAGProcessor:FAISS Score: [0.7300], PDF: 147, Chunk: 2, metadata: [{}]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:FAISS Score: [0.9178], PDF: 207, Chunk: 1, metadata: [{}]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:FAISS Score: [0.9236], PDF: 283, Chunk: 1, metadata: [{}]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:FAISS Score: [0.9236], PDF: 283, Chunk: 1, metadata: [{}]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:FAISS Score: [0.9341], PDF: 62, Chunk: 1, metadata: [{}]
2024-11-08 11:48:15:INFO:utils.RAGProcessor:Adjusted Weights: {'bm25': 0.23076923076923075, 'faiss': 0.28846153846153844, 'importance': 0.0, 'semantic': 0.07692307692307694, 'coverage': 0.11538461538461538, 'position': 0.09615384615384616, 'density': 0.14423076923076922, 'context': 0.04807692307692308}
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 147, Chunk 2: Final Score=1.0000, BM25=1.0000, FAISS=1.0000, Importance=0.8765, Semantic=1.0000, Coverage=1.0000, Position=1.0000, Density=1.0000, Context=1.0000
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 147, Chunk 3: Final Score=0.1750, BM25=0.3061, FAISS=0.0000, Importance=0.2123, Semantic=0.2694, Coverage=0.4433, Position=0.0000, Density=0.1747, Context=0.1513
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 207, Chunk 1: Final Score=0.0330, BM25=0.0000, FAISS=0.0798, Importance=1.0000, Semantic=0.0000, Coverage=0.0000, Position=0.1041, Density=0.0000, Context=0.0000
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 283, Chunk 1: Final Score=0.0149, BM25=0.0000, FAISS=0.0517, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 283, Chunk 0: Final Score=0.0126, BM25=0.0029, FAISS=0.0000, Importance=0.0000, Semantic=0.0523, Coverage=0.0000, Position=0.0714, Density=0.0000, Context=0.0204
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 343, Chunk 0: Final Score=0.0094, BM25=0.0058, FAISS=0.0000, Importance=0.0662, Semantic=0.0155, Coverage=0.0000, Position=0.0720, Density=0.0000, Context=0.0000
2024-11-08 11:48:15:INFO:utils.RAGProcessor:PDF 62, Chunk 1: Final Score=0.0000, BM25=0.0000, FAISS=0.0000, Importance=0.0000, Semantic=0.0000, Coverage=0.0000, Position=0.0000, Density=0.0000, Context=0.0000
2024-11-08 11:48:15:INFO:utils.RAGProcessor:----------------------------------------------------------------------------------------------------
2024-11-08 11:48:15:INFO:utils.RAGProcessor:Final Rankings (Adaptive Weights):
2024-11-08 11:48:15:INFO:utils.RAGProcessor:Query Features - Length: 6, Diversity: 0.86
2024-11-08 11:48:15:INFO:__main__:================================================================= QID: 27 =================================================================
